<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.42">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Local Employment CART Analysis – Pathways taken after high school - Northeast</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-2f5df379a58b258e96c21c0638c20c03.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-6bd9cfa162949bde0a231f530c97869d.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">Pathways taken after high school - Northeast</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html"> 
<span class="menu-text">Summary</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-data-prep-and-summaries" role="link" data-bs-toggle="dropdown" aria-expanded="false">
      <i class="bi bi-fa-gear" role="img">
</i> 
 <span class="menu-text">Data Prep and Summaries</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-data-prep-and-summaries">    
        <li>
    <a class="dropdown-item" href="./k12enrollment.html">
 <span class="dropdown-text">K12Enrollment</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./k12orgs.html">
 <span class="dropdown-text">K12Orgs</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./act.html">
 <span class="dropdown-text">ACT</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./ap.html">
 <span class="dropdown-text">AP</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./cteenrollment.html">
 <span class="dropdown-text">CTEEnrollment</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./ctedemographics.html">
 <span class="dropdown-text">CTEDemographics</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./assessments.html">
 <span class="dropdown-text">Assessments</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./sat.html">
 <span class="dropdown-text">SAT</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./nscenrollment.html">
 <span class="dropdown-text">National Student Clearinghouse - Enrollment</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./nsccompletions.html">
 <span class="dropdown-text">National Student Clearinghouse - Completions</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./emp_states_each_year.html">
 <span class="dropdown-text">Employment states each year</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./unemployment.html">
 <span class="dropdown-text">Unemployment</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./avgwages.html">
 <span class="dropdown-text">Average wages</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-analysis" role="link" data-bs-toggle="dropdown" aria-expanded="false">
      <i class="bi bi-fa-gear" role="img">
</i> 
 <span class="menu-text">Analysis</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-analysis">    
        <li>
    <a class="dropdown-item" href="./analysis_mca.html">
 <span class="dropdown-text">Multiple Correspondence Analysis</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./analysis_dep_var_states.html">
 <span class="dropdown-text">Dependent Variable States</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./analysis_local_employment_ct.html">
 <span class="dropdown-text">Local Employment Cross-tabs</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./analysis_local_employment_CART.html">
 <span class="dropdown-text">Local Employment CART Analysis</span></a>
  </li>  
    </ul>
  </li>
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#methodology" id="toc-methodology" class="nav-link active" data-scroll-target="#methodology">Methodology</a></li>
  <li><a href="#meaningful-emp-in-ne" id="toc-meaningful-emp-in-ne" class="nav-link" data-scroll-target="#meaningful-emp-in-ne">Meaningful emp in NE</a>
  <ul class="collapse">
  <li><a href="#one-year-after-graduation" id="toc-one-year-after-graduation" class="nav-link" data-scroll-target="#one-year-after-graduation">One year after graduation</a>
  <ul class="collapse">
  <li><a href="#base-model" id="toc-base-model" class="nav-link" data-scroll-target="#base-model">Base model</a></li>
  <li><a href="#pre-pruning" id="toc-pre-pruning" class="nav-link" data-scroll-target="#pre-pruning">Pre-pruning</a></li>
  <li><a href="#post-pruning" id="toc-post-pruning" class="nav-link" data-scroll-target="#post-pruning">Post-pruning</a></li>
  <li><a href="#summary" id="toc-summary" class="nav-link" data-scroll-target="#summary">Summary</a></li>
  </ul></li>
  <li><a href="#five-years-after-graduation" id="toc-five-years-after-graduation" class="nav-link" data-scroll-target="#five-years-after-graduation">Five years after graduation</a>
  <ul class="collapse">
  <li><a href="#base-model-1" id="toc-base-model-1" class="nav-link" data-scroll-target="#base-model-1">Base model</a></li>
  <li><a href="#pre-pruning-1" id="toc-pre-pruning-1" class="nav-link" data-scroll-target="#pre-pruning-1">Pre-pruning</a></li>
  <li><a href="#post-pruning-1" id="toc-post-pruning-1" class="nav-link" data-scroll-target="#post-pruning-1">Post-pruning</a></li>
  <li><a href="#summary-1" id="toc-summary-1" class="nav-link" data-scroll-target="#summary-1">Summary</a></li>
  </ul></li>
  <li><a href="#ten-years-after-graduation" id="toc-ten-years-after-graduation" class="nav-link" data-scroll-target="#ten-years-after-graduation">Ten years after graduation</a>
  <ul class="collapse">
  <li><a href="#base-model-2" id="toc-base-model-2" class="nav-link" data-scroll-target="#base-model-2">Base model</a></li>
  <li><a href="#pre-pruning-2" id="toc-pre-pruning-2" class="nav-link" data-scroll-target="#pre-pruning-2">Pre-pruning</a></li>
  <li><a href="#post-pruning-2" id="toc-post-pruning-2" class="nav-link" data-scroll-target="#post-pruning-2">Post-pruning</a></li>
  <li><a href="#summary-2" id="toc-summary-2" class="nav-link" data-scroll-target="#summary-2">Summary</a></li>
  </ul></li>
  <li><a href="#summary-across-time" id="toc-summary-across-time" class="nav-link" data-scroll-target="#summary-across-time">Summary across time</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Local Employment CART Analysis</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<div class="cell">
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<colgroup>
<col style="width: 2%">
<col style="width: 1%">
<col style="width: 4%">
<col style="width: 4%">
<col style="width: 4%">
<col style="width: 4%">
<col style="width: 3%">
<col style="width: 5%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 7%">
<col style="width: 4%">
<col style="width: 2%">
<col style="width: 6%">
<col style="width: 6%">
<col style="width: 4%">
<col style="width: 4%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 6%">
<col style="width: 8%">
<col style="width: 8%">
<col style="width: 4%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: right;">PersonID</th>
<th style="text-align: left;">Gender</th>
<th style="text-align: left;">grad.year.covid</th>
<th style="text-align: right;">economic.status</th>
<th style="text-align: right;">pseo.participant</th>
<th style="text-align: right;">SpecialEdStatus</th>
<th style="text-align: left;">RaceEthnicity</th>
<th style="text-align: left;">Dem_Desc</th>
<th style="text-align: left;">took.ACT</th>
<th style="text-align: right;">ap.exam</th>
<th style="text-align: left;">cte.achievement</th>
<th style="text-align: right;">english.learner</th>
<th style="text-align: right;">ps.grad</th>
<th style="text-align: left;">ps.grad.InstitutionSector</th>
<th style="text-align: left;">highest.cred.level</th>
<th style="text-align: left;">ps.grad.location</th>
<th style="text-align: right;">ACTCompositeScore</th>
<th style="text-align: right;">MCA.M</th>
<th style="text-align: right;">MCA.R</th>
<th style="text-align: right;">MCA.S</th>
<th style="text-align: right;">total.cte.courses.taken</th>
<th style="text-align: left;">grad.year.1</th>
<th style="text-align: left;">grad.year.5</th>
<th style="text-align: left;">grad.year.10</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">6140596</td>
<td style="text-align: left;">F</td>
<td style="text-align: left;">Pre-covid grad</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: left;">White</td>
<td style="text-align: left;">Urban/town/rural mix</td>
<td style="text-align: left;">Yes</td>
<td style="text-align: right;">0</td>
<td style="text-align: left;">CTE Concentrator or Completor</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: left;">Did not grad</td>
<td style="text-align: left;">Some college</td>
<td style="text-align: left;">Did not grad</td>
<td style="text-align: right;">15</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">6</td>
<td style="text-align: left;">Attending ps</td>
<td style="text-align: left;">Not meaningful, not attending ps</td>
<td style="text-align: left;">After 2023</td>
</tr>
<tr class="even">
<td style="text-align: right;">1986818</td>
<td style="text-align: left;">M</td>
<td style="text-align: left;">Post-covid grad</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: left;">Unknown</td>
<td style="text-align: left;">Urban/town/rural mix</td>
<td style="text-align: left;">No</td>
<td style="text-align: right;">0</td>
<td style="text-align: left;">CTE Concentrator or Completor</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: left;">Never attended ps</td>
<td style="text-align: left;">No college</td>
<td style="text-align: left;">Never attended ps</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">7</td>
<td style="text-align: left;">Not meaningful, not attending ps</td>
<td style="text-align: left;">After 2023</td>
<td style="text-align: left;">After 2023</td>
</tr>
<tr class="odd">
<td style="text-align: right;">11614284</td>
<td style="text-align: left;">F</td>
<td style="text-align: left;">Post-covid grad</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: left;">Unknown</td>
<td style="text-align: left;">Town/rural mix</td>
<td style="text-align: left;">No</td>
<td style="text-align: right;">0</td>
<td style="text-align: left;">CTE Participant</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: left;">Did not grad</td>
<td style="text-align: left;">Some college</td>
<td style="text-align: left;">Did not grad</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">4</td>
<td style="text-align: left;">After 2023</td>
<td style="text-align: left;">After 2023</td>
<td style="text-align: left;">After 2023</td>
</tr>
<tr class="even">
<td style="text-align: right;">8332752</td>
<td style="text-align: left;">M</td>
<td style="text-align: left;">Pre-covid grad</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: left;">White</td>
<td style="text-align: left;">Urban/town/rural mix</td>
<td style="text-align: left;">Yes</td>
<td style="text-align: right;">0</td>
<td style="text-align: left;">CTE Participant</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">1</td>
<td style="text-align: left;">Master degree or higher</td>
<td style="text-align: left;">In MN</td>
<td style="text-align: right;">26</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">2</td>
<td style="text-align: left;">Attending ps</td>
<td style="text-align: left;">Attending ps</td>
<td style="text-align: left;">After 2023</td>
</tr>
<tr class="odd">
<td style="text-align: right;">6569729</td>
<td style="text-align: left;">F</td>
<td style="text-align: left;">Pre-covid grad</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: left;">White</td>
<td style="text-align: left;">Entirely rural</td>
<td style="text-align: left;">Yes</td>
<td style="text-align: right;">0</td>
<td style="text-align: left;">No CTE</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: left;">Did not grad</td>
<td style="text-align: left;">Some college</td>
<td style="text-align: left;">Did not grad</td>
<td style="text-align: right;">24</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">Attending ps</td>
<td style="text-align: left;">Meaningful emp MN</td>
<td style="text-align: left;">Meaningful emp MN</td>
</tr>
<tr class="even">
<td style="text-align: right;">357415</td>
<td style="text-align: left;">F</td>
<td style="text-align: left;">Pre-covid grad</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: left;">White</td>
<td style="text-align: left;">Urban/town/rural mix</td>
<td style="text-align: left;">Yes</td>
<td style="text-align: right;">0</td>
<td style="text-align: left;">No CTE</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">4</td>
<td style="text-align: left;">Associate degree</td>
<td style="text-align: left;">In region</td>
<td style="text-align: right;">22</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">Attending ps</td>
<td style="text-align: left;">After 2023</td>
<td style="text-align: left;">After 2023</td>
</tr>
</tbody>
</table>
</div>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;">x</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">PersonID</td>
</tr>
<tr class="even">
<td style="text-align: left;">Gender</td>
</tr>
<tr class="odd">
<td style="text-align: left;">grad.year.covid</td>
</tr>
<tr class="even">
<td style="text-align: left;">economic.status</td>
</tr>
<tr class="odd">
<td style="text-align: left;">pseo.participant</td>
</tr>
<tr class="even">
<td style="text-align: left;">SpecialEdStatus</td>
</tr>
<tr class="odd">
<td style="text-align: left;">RaceEthnicity</td>
</tr>
<tr class="even">
<td style="text-align: left;">Dem_Desc</td>
</tr>
<tr class="odd">
<td style="text-align: left;">took.ACT</td>
</tr>
<tr class="even">
<td style="text-align: left;">ap.exam</td>
</tr>
<tr class="odd">
<td style="text-align: left;">cte.achievement</td>
</tr>
<tr class="even">
<td style="text-align: left;">english.learner</td>
</tr>
<tr class="odd">
<td style="text-align: left;">ps.grad</td>
</tr>
<tr class="even">
<td style="text-align: left;">ps.grad.InstitutionSector</td>
</tr>
<tr class="odd">
<td style="text-align: left;">highest.cred.level</td>
</tr>
<tr class="even">
<td style="text-align: left;">ps.grad.location</td>
</tr>
<tr class="odd">
<td style="text-align: left;">ACTCompositeScore</td>
</tr>
<tr class="even">
<td style="text-align: left;">MCA.M</td>
</tr>
<tr class="odd">
<td style="text-align: left;">MCA.R</td>
</tr>
<tr class="even">
<td style="text-align: left;">MCA.S</td>
</tr>
<tr class="odd">
<td style="text-align: left;">total.cte.courses.taken</td>
</tr>
<tr class="even">
<td style="text-align: left;">grad.year.1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">grad.year.5</td>
</tr>
<tr class="even">
<td style="text-align: left;">grad.year.10</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code> [1] "PersonID"                  "Gender"                   
 [3] "grad.year.covid"           "economic.status"          
 [5] "pseo.participant"          "SpecialEdStatus"          
 [7] "RaceEthnicity"             "Dem_Desc"                 
 [9] "took.ACT"                  "ap.exam"                  
[11] "cte.achievement"           "english.learner"          
[13] "ps.grad"                   "ps.grad.InstitutionSector"
[15] "highest.cred.level"        "ps.grad.location"         
[17] "ACTCompositeScore"         "MCA.M"                    
[19] "MCA.R"                     "MCA.S"                    
[21] "total.cte.courses.taken"   "grad.year.1"              
[23] "grad.year.5"               "grad.year.10"             </code></pre>
</div>
</div>
<p><br></p>
<p>We will use a tree-based method for classification - CART analysis. This type of analysis involves stratifying and/or segmenting the predictor space into a number of simple regions. Essentially, it’s another way to see which independent variables play a role in if an individual has meaningful employment in the local region X. We will be using the independent variables that were identified as being important in the multiple correspondence analysis.</p>
<p>There are a number of states at which we categorize individuals in the dataset;</p>
<ol type="1">
<li>Has meaningful employment in the Northeast region.</li>
<li>Has meaningful employment in Minnesota, but not in Northeast Minnesota.</li>
<li>Is attending post-secondary.</li>
<li>Has a MN employment record but it’s not meaningful, and not attending post-secondary.</li>
<li>Does not have a MN employment record and is not attending post-secondary.</li>
</ol>
<p>There are three “times” in which we checked to see if the individual had meaningful employment within these geographies;</p>
<ol type="1">
<li>one year after graduating high school</li>
<li>five years after graduation, and</li>
<li>ten years after graduation.</li>
</ol>
<p>Meaningful employment is determined by whether an individual worked 1,000 hours for an employer during time X. In addition, if the individual is working for an employer but not meaningful at time X but worked 1,000 hours for that employer during another year it’s still considered “meaningful”.</p>
<p>Due to time x potentially being passed the date of the latest data (2023) for some individuals, the analysis below will filter out all individuals where time x is after 2023.</p>
<p>The primary independent variables that the cross tables indicated as important are;</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>$Gender
[1] "factor"

$grad.year.covid
[1] "factor"

$economic.status
[1] "factor"

$pseo.participant
[1] "factor"

$SpecialEdStatus
[1] "factor"

$RaceEthnicity
[1] "factor"

$Dem_Desc
[1] "factor"

$took.ACT
[1] "factor"

$ap.exam
[1] "factor"

$cte.achievement
[1] "factor"

$english.learner
[1] "factor"

$ps.grad
[1] "factor"

$ps.grad.InstitutionSector
[1] "factor"

$highest.cred.level
[1] "factor"

$ps.grad.location
[1] "factor"

$ACTCompositeScore
[1] "numeric"

$MCA.M
[1] "numeric"

$MCA.R
[1] "numeric"

$MCA.S
[1] "numeric"

$total.cte.courses.taken
[1] "numeric"</code></pre>
</div>
</div>
<p><br></p>
<section id="methodology" class="level1">
<h1>Methodology</h1>
<p>We are going to use CART/Decision Trees to see which independent variables are important. One limitation of this method is that the dependent variable must be binary. So, we will need to force our 5 states into 2 states. We will begin by doing the following;</p>
<ol type="1">
<li>Meaningful emp in SW: this will include the following categories for each time.x;</li>
</ol>
<ul>
<li>Meaningful emp in region</li>
</ul>
<ol start="2" type="1">
<li>No meaningful emp in SW: this will include the following categories for each time.x:</li>
</ol>
<ul>
<li>Meaningful emp MN</li>
<li>Attending ps</li>
<li>Not meaningful, not attending ps</li>
<li>No MN emp record, not attending ps</li>
</ul>
<p>Once we look at this analysis, we can determine if we want to split the binary differently for further analysis.</p>
<p><br></p>
</section>
<section id="meaningful-emp-in-ne" class="level1">
<h1>Meaningful emp in NE</h1>
<p>First, let’s re-categorize the dependent variables so that they are binary.</p>
<p><br></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>meaningful.emp.ne <span class="ot">&lt;-</span> master <span class="sc">%&gt;%</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">grad.year.1 =</span> <span class="fu">ifelse</span>(grad.year<span class="fl">.1</span> <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Meaningful emp NE"</span>), <span class="st">"Meaningful emp NE"</span>, </span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>                              <span class="fu">ifelse</span>(grad.year<span class="fl">.1</span> <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Meaningful emp MN"</span>, <span class="st">"Not meaningful, not attending ps"</span>, <span class="st">"No MN emp record, not attending ps"</span>), <span class="st">"No meaningful emp NE"</span>,</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>                                     <span class="fu">ifelse</span>(grad.year<span class="fl">.1</span> <span class="sc">==</span> <span class="st">"After 2023"</span>, <span class="st">"After 2023"</span>,</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>                                            <span class="fu">ifelse</span>(grad.year<span class="fl">.1</span> <span class="sc">==</span> <span class="st">"Attending ps"</span>, <span class="st">"Attending ps"</span>, <span class="fu">as.character</span>(grad.year<span class="fl">.1</span>))))),</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>         <span class="at">grad.year.1 =</span> <span class="fu">as.factor</span>(grad.year<span class="fl">.1</span>),</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>         <span class="at">grad.year.5 =</span> <span class="fu">ifelse</span>(grad.year<span class="fl">.5</span> <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Meaningful emp NE"</span>), <span class="st">"Meaningful emp NE"</span>, </span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>                              <span class="fu">ifelse</span>(grad.year<span class="fl">.5</span> <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Meaningful emp MN"</span>, <span class="st">"Not meaningful, not attending ps"</span>, <span class="st">"No MN emp record, not attending ps"</span>), <span class="st">"No meaningful emp NE"</span>,</span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>                                     <span class="fu">ifelse</span>(grad.year<span class="fl">.5</span> <span class="sc">==</span> <span class="st">"After 2023"</span>, <span class="st">"After 2023"</span>,</span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>                                            <span class="fu">ifelse</span>(grad.year<span class="fl">.5</span> <span class="sc">==</span> <span class="st">"Attending ps"</span>, <span class="st">"Attending ps"</span>, <span class="fu">as.character</span>(grad.year<span class="fl">.5</span>))))),</span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>         <span class="at">grad.year.5 =</span> <span class="fu">as.factor</span>(grad.year<span class="fl">.5</span>),</span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>         <span class="at">grad.year.10 =</span> <span class="fu">ifelse</span>(grad.year<span class="fl">.10</span> <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Meaningful emp NE"</span>), <span class="st">"Meaningful emp NE"</span>, </span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>                              <span class="fu">ifelse</span>(grad.year<span class="fl">.10</span> <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Meaningful emp MN"</span>, <span class="st">"Not meaningful, not attending ps"</span>, <span class="st">"No MN emp record, not attending ps"</span>), <span class="st">"No meaningful emp NE"</span>,</span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>                                     <span class="fu">ifelse</span>(grad.year<span class="fl">.10</span> <span class="sc">==</span> <span class="st">"After 2023"</span>, <span class="st">"After 2023"</span>,</span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a>                                            <span class="fu">ifelse</span>(grad.year<span class="fl">.10</span> <span class="sc">==</span> <span class="st">"Attending ps"</span>, <span class="st">"Attending ps"</span>, <span class="fu">as.character</span>(grad.year<span class="fl">.10</span>))))),</span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a>         <span class="at">grad.year.10 =</span> <span class="fu">as.factor</span>(grad.year<span class="fl">.10</span>),</span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a>         <span class="at">grad.year.1 =</span> <span class="fu">fct_relevel</span>(grad.year<span class="fl">.1</span>, <span class="st">"Meaningful emp NE"</span>, <span class="st">"No meaningful emp NE"</span>, <span class="st">"Attending ps"</span>, <span class="st">"After 2023"</span>),</span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a>         <span class="at">grad.year.5 =</span> <span class="fu">fct_relevel</span>(grad.year<span class="fl">.5</span>, <span class="st">"Meaningful emp NE"</span>, <span class="st">"No meaningful emp NE"</span>, <span class="st">"Attending ps"</span>, <span class="st">"After 2023"</span>),</span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a>         <span class="at">grad.year.10 =</span> <span class="fu">fct_relevel</span>(grad.year<span class="fl">.10</span>, <span class="st">"Meaningful emp NE"</span>, <span class="st">"No meaningful emp NE"</span>, <span class="st">"Attending ps"</span>, <span class="st">"After 2023"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><br></p>
<section id="one-year-after-graduation" class="level2">
<h2 class="anchored" data-anchor-id="one-year-after-graduation">One year after graduation</h2>
<p>Since our dependent variable includes a state in which someone is attending post-secondary and the post-secondary variables are related to an individual finishing post-secondary, we will remove “ps.grad.InstitutionSector” and the “highest.cred.level” variable from the analysis.</p>
<div class="cell">
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;">x</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Gender</td>
</tr>
<tr class="even">
<td style="text-align: left;">grad.year.covid</td>
</tr>
<tr class="odd">
<td style="text-align: left;">economic.status</td>
</tr>
<tr class="even">
<td style="text-align: left;">pseo.participant</td>
</tr>
<tr class="odd">
<td style="text-align: left;">SpecialEdStatus</td>
</tr>
<tr class="even">
<td style="text-align: left;">RaceEthnicity</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Dem_Desc</td>
</tr>
<tr class="even">
<td style="text-align: left;">took.ACT</td>
</tr>
<tr class="odd">
<td style="text-align: left;">ap.exam</td>
</tr>
<tr class="even">
<td style="text-align: left;">cte.achievement</td>
</tr>
<tr class="odd">
<td style="text-align: left;">english.learner</td>
</tr>
<tr class="even">
<td style="text-align: left;">ps.grad</td>
</tr>
<tr class="odd">
<td style="text-align: left;">ps.grad.InstitutionSector</td>
</tr>
<tr class="even">
<td style="text-align: left;">highest.cred.level</td>
</tr>
<tr class="odd">
<td style="text-align: left;">ps.grad.location</td>
</tr>
<tr class="even">
<td style="text-align: left;">ACTCompositeScore</td>
</tr>
<tr class="odd">
<td style="text-align: left;">MCA.M</td>
</tr>
<tr class="even">
<td style="text-align: left;">MCA.R</td>
</tr>
<tr class="odd">
<td style="text-align: left;">MCA.S</td>
</tr>
<tr class="even">
<td style="text-align: left;">total.cte.courses.taken</td>
</tr>
<tr class="odd">
<td style="text-align: left;">grad.year.1</td>
</tr>
</tbody>
</table>
</div>
</div>
<section id="base-model" class="level3">
<h3 class="anchored" data-anchor-id="base-model">Base model</h3>
<p>First we will split the data into two sets, Train and Test, in a 70:30 ratio. The Train set is used for training and creating the model. The Test set is considered to be a dummy production environment to test predictions and evaluate the accuracy of the model.</p>
<p><br></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">1234</span>)</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>sample_ind <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="fu">nrow</span>(meaningful.emp.ne.grad.year<span class="fl">.1</span>), <span class="fu">nrow</span>(meaningful.emp.ne.grad.year<span class="fl">.1</span>) <span class="sc">*</span>.<span class="dv">7</span>)</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>train <span class="ot">&lt;-</span> meaningful.emp.ne.grad.year<span class="fl">.1</span>[sample_ind,]</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>test <span class="ot">&lt;-</span> meaningful.emp.ne.grad.year<span class="fl">.1</span>[<span class="sc">-</span>sample_ind,]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><br></p>
<p>Next, we create a decision tree model by calling the rpart function. Let’s first create a base model with default parameters and value. The CP (complexity parameter) is used to control tree growth. If the cost of adding a variable is higher then the value of CP, then tree growth stops.</p>
<p><br></p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="analysis_local_employment_CART_files/figure-html/decision tree plot meaningful emp NE grad year 1-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Classification tree:
rpart(formula = grad.year.1 ~ ., data = train, method = "class", 
    control = rpart.control(cp = 0))

Variables actually used in tree construction:
 [1] ACTCompositeScore         ap.exam                  
 [3] cte.achievement           Dem_Desc                 
 [5] economic.status           english.learner          
 [7] Gender                    grad.year.covid          
 [9] highest.cred.level        MCA.M                    
[11] MCA.R                     MCA.S                    
[13] ps.grad                   ps.grad.InstitutionSector
[15] ps.grad.location          pseo.participant         
[17] RaceEthnicity             SpecialEdStatus          
[19] took.ACT                  total.cte.courses.taken  

Root node error: 2901/15927 = 0.18214

n= 15927 

           CP nsplit rel error  xerror     xstd
1  2.6887e-02      0   1.00000 1.00000 0.016791
2  2.2061e-02      1   0.97311 0.99862 0.016782
3  5.1706e-03      2   0.95105 0.95105 0.016463
4  3.1024e-03      3   0.94588 0.95209 0.016471
5  2.4130e-03      4   0.94278 0.95312 0.016478
6  2.0683e-03      7   0.93554 0.95863 0.016515
7  1.8959e-03      9   0.93140 0.95691 0.016503
8  1.7235e-03     11   0.92761 0.95140 0.016466
9  1.3788e-03     14   0.92244 0.94726 0.016437
10 1.2065e-03     15   0.92106 0.95071 0.016461
11 1.1490e-03     20   0.91451 0.95174 0.016468
12 1.0341e-03     27   0.90555 0.94760 0.016440
13 8.6177e-04     29   0.90348 0.95071 0.016461
14 6.8942e-04     32   0.90038 0.95346 0.016480
15 5.1706e-04     35   0.89831 0.95484 0.016489
16 4.5961e-04     51   0.89004 0.95967 0.016522
17 3.4471e-04     70   0.87970 0.96208 0.016539
18 3.2009e-04     91   0.87211 0.97449 0.016622
19 2.9546e-04    112   0.86487 0.98035 0.016661
20 2.5853e-04    119   0.86281 0.98931 0.016720
21 2.2981e-04    127   0.86074 0.99035 0.016727
22 2.0683e-04    136   0.85867 0.99311 0.016745
23 1.9698e-04    144   0.85695 0.99759 0.016775
24 1.7235e-04    151   0.85557 1.00483 0.016822
25 1.1490e-04    161   0.85384 1.01551 0.016891
26 1.0341e-04    170   0.85281 1.02551 0.016955
27 9.8488e-05    180   0.85178 1.02551 0.016955
28 8.6177e-05    242   0.84143 1.02964 0.016981
29 6.8942e-05    250   0.84074 1.03309 0.017003
30 5.7451e-05    267   0.83937 1.03930 0.017042
31 4.9244e-05    273   0.83902 1.04068 0.017051
32 0.0000e+00    287   0.83833 1.04447 0.017075</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="analysis_local_employment_CART_files/figure-html/decision tree plot meaningful emp NE grad year 1-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p><br></p>
<p>The resulting model produced a VERY complex tree with too many nodes that it isn’t interpretable. However, examining the complexity parameters shows that I have an increasing cross-validated error which provides evidence of a decision tree with too much complexity.</p>
<p>Below are the values in variable importance and there are a couple of themes of importance;</p>
<ol type="1">
<li>post-secondary pathway</li>
<li>cte involvment</li>
<li>demographics and prep for post-secondary pathway</li>
</ol>
<p><br></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>meaningful.emp.ne.grad.year.<span class="fl">1.</span>model<span class="sc">$</span>variable.importance</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>         ps.grad.location ps.grad.InstitutionSector        highest.cred.level 
                436.68800                 325.04361                 258.85393 
                  ps.grad   total.cte.courses.taken         ACTCompositeScore 
                123.65622                  87.31961                  80.66987 
          cte.achievement                     MCA.M                     MCA.R 
                 56.65016                  56.35751                  45.28907 
            RaceEthnicity                     MCA.S                  took.ACT 
                 43.66248                  42.41104                  37.63157 
          economic.status                    Gender           SpecialEdStatus 
                 36.71613                  33.28840                  26.70401 
                 Dem_Desc           grad.year.covid          pseo.participant 
                 22.01226                  18.36150                  15.42399 
                  ap.exam           english.learner 
                 13.94407                  10.05603 </code></pre>
</div>
</div>
<p>Next, the accuracy of the model is computed and stored in a variable base_accuracy so we can compare it to our pruned trees later.</p>
<p><br></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>test<span class="sc">$</span>pred <span class="ot">&lt;-</span> <span class="fu">predict</span>(meaningful.emp.ne.grad.year.<span class="fl">1.</span>model, test, <span class="at">type =</span> <span class="st">"class"</span>)</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>base_accuracy <span class="ot">&lt;-</span> <span class="fu">mean</span>(test<span class="sc">$</span>pred <span class="sc">==</span> test<span class="sc">$</span>grad.year<span class="fl">.1</span>)</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>base_accuracy</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.80416</code></pre>
</div>
</div>
<p><br></p>
</section>
<section id="pre-pruning" class="level3">
<h3 class="anchored" data-anchor-id="pre-pruning">Pre-pruning</h3>
<p>Next, we need to prune. We can either pre-prune or post-prune. We will start with pre-pruning and use each method - max depth, min depth, and min bucket.</p>
<p><br></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Grow a tree with minsplit of 40 and max depth of 10</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>meaningful.emp.ne.grad.year.<span class="fl">1.</span>model.preprune <span class="ot">&lt;-</span> <span class="fu">rpart</span>(grad.year<span class="fl">.1</span> <span class="sc">~</span> ., <span class="at">data =</span> train, <span class="at">method =</span> <span class="st">"class"</span>, </span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>                   <span class="at">control =</span> <span class="fu">rpart.control</span>(<span class="at">cp =</span> <span class="dv">0</span>, <span class="at">maxdepth =</span> <span class="dv">5</span>, <span class="at">minsplit =</span> <span class="dv">10</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Plot tree</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="fu">rpart.plot</span>(meaningful.emp.ne.grad.year.<span class="fl">1.</span>model.preprune)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="analysis_local_employment_CART_files/figure-html/pre pruning plot meaningful emp NE grad year 1-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Examine the complexity plot</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="fu">printcp</span>(meaningful.emp.ne.grad.year.<span class="fl">1.</span>model.preprune)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Classification tree:
rpart(formula = grad.year.1 ~ ., data = train, method = "class", 
    control = rpart.control(cp = 0, maxdepth = 5, minsplit = 10))

Variables actually used in tree construction:
 [1] ACTCompositeScore         ap.exam                  
 [3] Gender                    highest.cred.level       
 [5] MCA.M                     ps.grad.InstitutionSector
 [7] ps.grad.location          RaceEthnicity            
 [9] SpecialEdStatus           total.cte.courses.taken  

Root node error: 2901/15927 = 0.18214

n= 15927 

           CP nsplit rel error  xerror     xstd
1  0.02688728      0   1.00000 1.00000 0.016791
2  0.02206136      1   0.97311 1.00034 0.016793
3  0.00517063      2   0.95105 0.95105 0.016463
4  0.00310238      3   0.94588 0.94967 0.016454
5  0.00206825      4   0.94278 0.95691 0.016503
6  0.00103413      6   0.93864 0.95829 0.016513
7  0.00068942      7   0.93761 0.95622 0.016499
8  0.00034471      9   0.93623 0.95588 0.016496
9  0.00011490     11   0.93554 0.95829 0.016513
10 0.00000000     14   0.93519 0.95932 0.016520</code></pre>
</div>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plotcp</span>(meaningful.emp.ne.grad.year.<span class="fl">1.</span>model.preprune)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="analysis_local_employment_CART_files/figure-html/pre pruning plot meaningful emp NE grad year 1-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Compute the accuracy of the pruned tree</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>test<span class="sc">$</span>pred <span class="ot">&lt;-</span> <span class="fu">predict</span>(meaningful.emp.ne.grad.year.<span class="fl">1.</span>model.preprune, test, <span class="at">type =</span> <span class="st">"class"</span>)</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>accuracy_preprun <span class="ot">&lt;-</span> <span class="fu">mean</span>(test<span class="sc">$</span>pred <span class="sc">==</span> test<span class="sc">$</span>grad.year<span class="fl">.1</span>)</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>accuracy_preprun</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.826571</code></pre>
</div>
</div>
<p>The pre-pruning resulted in a significantly less complex tree with a .826571 accuracy. Let’s see what variables are important in this model.</p>
<p>This model does indicate a difference in importance when pruned. A few highlights are;</p>
<ul>
<li>post-secondary pathway is still very important</li>
<li>SpecialEdStatus and RaceEthnicity: a few demographic variables jump up in importance</li>
<li>preparations for post-secondary pathway are still important.</li>
<li>Missing: MCA.S, pseo.participant</li>
</ul>
<p><br></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>meaningful.emp.ne.grad.year.<span class="fl">1.</span>model.preprune<span class="sc">$</span>variable.importance</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>         ps.grad.location ps.grad.InstitutionSector        highest.cred.level 
              424.1945871               309.5954679               244.4810130 
                  ps.grad           SpecialEdStatus             RaceEthnicity 
              113.8582896                10.6977716                10.5424891 
  total.cte.courses.taken                     MCA.M                    Gender 
                7.8370518                 6.1906292                 3.7099009 
        ACTCompositeScore                     MCA.R                   ap.exam 
                3.5000000                 2.9701904                 2.9252036 
          cte.achievement           english.learner                  took.ACT 
                2.4650296                 2.3835567                 2.0118710 
          grad.year.covid           economic.status                  Dem_Desc 
                1.2421038                 0.6101951                 0.4481481 </code></pre>
</div>
</div>
<p><br></p>
</section>
<section id="post-pruning" class="level3">
<h3 class="anchored" data-anchor-id="post-pruning">Post-pruning</h3>
<p>Next, let’s try postpruning. The idea here is to allow the decision tree to grow fully and observe the CP value. Next, we prune/cut the tree with the optimal CP value as the parameter as shown in below code:</p>
<p><br></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Prune the hr_base_model based on the optimal cp value</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>meaningful.emp.ne.grad.year.<span class="fl">1.</span>model.postprune <span class="ot">&lt;-</span> <span class="fu">prune</span>(meaningful.emp.ne.grad.year.<span class="fl">1.</span>model, <span class="at">cp =</span> .<span class="dv">0017235</span>)</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a><span class="co">#Summary</span></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(meaningful.emp.ne.grad.year.<span class="fl">1.</span>model.postprune)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Call:
rpart(formula = grad.year.1 ~ ., data = train, method = "class", 
    control = rpart.control(cp = 0))
  n= 15927 

           CP nsplit rel error    xerror       xstd
1 0.026887280      0 1.0000000 1.0000000 0.01679054
2 0.022061358      1 0.9731127 0.9986212 0.01678154
3 0.005170631      2 0.9510514 0.9510514 0.01646346
4 0.003102378      3 0.9458807 0.9520855 0.01647053
5 0.002412961      4 0.9427784 0.9531196 0.01647759
6 0.002068252      7 0.9355395 0.9586350 0.01651515
7 0.001895898      9 0.9314030 0.9569114 0.01650344
8 0.001723544     11 0.9276112 0.9513961 0.01646582
9 0.001723500     14 0.9224405 0.9472596 0.01643747

Variable importance
         ps.grad.location ps.grad.InstitutionSector        highest.cred.level 
                       37                        25                        18 
                  ps.grad             RaceEthnicity   total.cte.courses.taken 
                       12                         1                         1 
                 took.ACT           cte.achievement                    Gender 
                        1                         1                         1 
                    MCA.M         ACTCompositeScore 
                        1                         1 

Node number 1: 15927 observations,    complexity param=0.02688728
  predicted class=No meaningful emp NE  expected loss=0.1821435  P(node) =1
    class counts:  2901 13026
   probabilities: 0.182 0.818 
  left son=2 (1374 obs) right son=3 (14553 obs)
  Primary splits:
      ps.grad.location          splits as  RRLRLRR, improve=361.0333, (1 missing)
      ps.grad.InstitutionSector splits as  RLRRLRR, improve=279.6156, (1 missing)
      highest.cred.level        splits as  LLLRRR,  improve=227.9247, (1 missing)
      ps.grad                   splits as  RL,      improve=204.3358, (0 missing)
      SpecialEdStatus           splits as  LR,      improve= 44.3790, (0 missing)
  Surrogate splits:
      ps.grad.InstitutionSector splits as  RLRRLRR, agree=0.972, adj=0.671, (0 split)
      highest.cred.level        splits as  LRLRRR,  agree=0.953, adj=0.451, (0 split)
      ps.grad                   splits as  RL,      agree=0.941, adj=0.315, (1 split)

Node number 2: 1374 observations,    complexity param=0.02206136
  predicted class=Meaningful emp NE     expected loss=0.4716157  P(node) =0.0862686
    class counts:   726   648
   probabilities: 0.528 0.472 
  left son=4 (890 obs) right son=5 (484 obs)
  Primary splits:
      highest.cred.level        splits as  LLRR--,   improve=13.459770, (1 missing)
      took.ACT                  splits as  RL,       improve= 7.832194, (0 missing)
      MCA.M                     &lt; 1.5  to the right, improve= 5.724150, (30 missing)
      SpecialEdStatus           splits as  LR,       improve= 4.902956, (0 missing)
      ps.grad.InstitutionSector splits as  LL-LR--,  improve= 4.626896, (1 missing)
  Surrogate splits:
      SpecialEdStatus splits as  LR,       agree=0.689, adj=0.118, (1 split)
      took.ACT        splits as  RL,       agree=0.665, adj=0.050, (0 split)
      MCA.R           &lt; 2.5  to the right, agree=0.663, adj=0.043, (0 split)
      english.learner splits as  LR,       agree=0.661, adj=0.039, (0 split)
      grad.year.covid splits as  RL,       agree=0.658, adj=0.031, (0 split)

Node number 3: 14553 observations
  predicted class=No meaningful emp NE  expected loss=0.1494537  P(node) =0.9137314
    class counts:  2175 12378
   probabilities: 0.149 0.851 

Node number 4: 890 observations,    complexity param=0.003102378
  predicted class=Meaningful emp NE     expected loss=0.4202247  P(node) =0.05587995
    class counts:   516   374
   probabilities: 0.580 0.420 
  left son=8 (859 obs) right son=9 (31 obs)
  Primary splits:
      RaceEthnicity      splits as  LRRRLL,   improve=3.250189, (0 missing)
      highest.cred.level splits as  RL----,   improve=2.923632, (1 missing)
      cte.achievement    splits as  LLR,      improve=2.666392, (0 missing)
      took.ACT           splits as  RL,       improve=2.287868, (0 missing)
      ACTCompositeScore  &lt; 23.5 to the left,  improve=2.285332, (272 missing)
  Surrogate splits:
      english.learner splits as  LR, agree=0.966, adj=0.032, (0 split)

Node number 5: 484 observations,    complexity param=0.005170631
  predicted class=No meaningful emp NE  expected loss=0.4338843  P(node) =0.03038865
    class counts:   210   274
   probabilities: 0.434 0.566 
  left son=10 (27 obs) right son=11 (457 obs)
  Primary splits:
      RaceEthnicity           splits as  RRRRLR,   improve=6.763489, (0 missing)
      grad.year.covid         splits as  LR,       improve=6.178141, (0 missing)
      MCA.M                   &lt; 1.5  to the right, improve=4.555672, (14 missing)
      Gender                  splits as  RL,       improve=3.904720, (0 missing)
      total.cte.courses.taken &lt; 3.5  to the right, improve=2.538637, (0 missing)
  Surrogate splits:
      grad.year.covid splits as  LR, agree=0.95, adj=0.111, (0 split)

Node number 8: 859 observations,    complexity param=0.002412961
  predicted class=Meaningful emp NE     expected loss=0.4121071  P(node) =0.05393357
    class counts:   505   354
   probabilities: 0.588 0.412 
  left son=16 (158 obs) right son=17 (701 obs)
  Primary splits:
      ACTCompositeScore         &lt; 18.5 to the left,  improve=3.096339, (257 missing)
      cte.achievement           splits as  LLR,      improve=2.622928, (0 missing)
      highest.cred.level        splits as  RL----,   improve=2.316877, (1 missing)
      took.ACT                  splits as  RL,       improve=1.902268, (0 missing)
      ps.grad.InstitutionSector splits as  LL-LR--,  improve=1.858528, (1 missing)
  Surrogate splits:
      MCA.R                   &lt; 2.5  to the left,  agree=0.809, adj=0.050, (250 split)
      RaceEthnicity           splits as  R---LR,   agree=0.801, adj=0.008, (7 split)
      total.cte.courses.taken &lt; 9.5  to the right, agree=0.801, adj=0.008, (0 split)

Node number 9: 31 observations
  predicted class=No meaningful emp NE  expected loss=0.3548387  P(node) =0.00194638
    class counts:    11    20
   probabilities: 0.355 0.645 

Node number 10: 27 observations
  predicted class=Meaningful emp NE     expected loss=0.2222222  P(node) =0.001695235
    class counts:    21     6
   probabilities: 0.778 0.222 

Node number 11: 457 observations,    complexity param=0.002068252
  predicted class=No meaningful emp NE  expected loss=0.4135667  P(node) =0.02869341
    class counts:   189   268
   probabilities: 0.414 0.586 
  left son=22 (202 obs) right son=23 (255 obs)
  Primary splits:
      Gender                  splits as  RL,       improve=3.709901, (0 missing)
      total.cte.courses.taken &lt; 3.5  to the right, improve=3.666492, (0 missing)
      MCA.M                   &lt; 1.5  to the right, improve=2.681315, (13 missing)
      MCA.R                   &lt; 1.5  to the right, improve=1.506431, (16 missing)
      economic.status         splits as  LR,       improve=1.183890, (0 missing)
  Surrogate splits:
      cte.achievement         splits as  LRR,      agree=0.665, adj=0.243, (0 split)
      total.cte.courses.taken &lt; 3.5  to the right, agree=0.650, adj=0.208, (0 split)
      economic.status         splits as  LR,       agree=0.571, adj=0.030, (0 split)
      grad.year.covid         splits as  LR,       agree=0.567, adj=0.020, (0 split)
      english.learner         splits as  RL,       agree=0.562, adj=0.010, (0 split)

Node number 16: 158 observations
  predicted class=Meaningful emp NE     expected loss=0.3227848  P(node) =0.009920261
    class counts:   107    51
   probabilities: 0.677 0.323 

Node number 17: 701 observations,    complexity param=0.002412961
  predicted class=Meaningful emp NE     expected loss=0.4322397  P(node) =0.04401331
    class counts:   398   303
   probabilities: 0.568 0.432 
  left son=34 (369 obs) right son=35 (332 obs)
  Primary splits:
      cte.achievement           splits as  LLR,      improve=5.288304, (0 missing)
      total.cte.courses.taken   &lt; 0.5  to the right, improve=3.581514, (0 missing)
      highest.cred.level        splits as  RL----,   improve=2.913699, (1 missing)
      ps.grad.InstitutionSector splits as  LL-LR--,  improve=2.447919, (1 missing)
      MCA.R                     &lt; 2.5  to the left,  improve=2.252377, (13 missing)
  Surrogate splits:
      total.cte.courses.taken   &lt; 1.5  to the right, agree=0.850, adj=0.684, (0 split)
      Gender                    splits as  RL,       agree=0.576, adj=0.105, (0 split)
      highest.cred.level        splits as  LR----,   agree=0.566, adj=0.084, (0 split)
      ps.grad.InstitutionSector splits as  RR-LL--,  agree=0.561, adj=0.072, (0 split)
      ap.exam                   splits as  LR,       agree=0.556, adj=0.063, (0 split)

Node number 22: 202 observations,    complexity param=0.002068252
  predicted class=No meaningful emp NE  expected loss=0.4851485  P(node) =0.01268287
    class counts:    98   104
   probabilities: 0.485 0.515 
  left son=44 (154 obs) right son=45 (48 obs)
  Primary splits:
      MCA.M             &lt; 1.5  to the right, improve=3.871789, (3 missing)
      grad.year.covid   splits as  LR,       improve=1.579584, (0 missing)
      english.learner   splits as  LR,       improve=1.410891, (0 missing)
      ACTCompositeScore &lt; 18.5 to the right, improve=1.329049, (133 missing)
      Dem_Desc          splits as  LLR,      improve=1.179609, (0 missing)
  Surrogate splits:
      MCA.R           &lt; 2.5  to the right, agree=0.859, adj=0.417, (0 split)
      RaceEthnicity   splits as  LLRL-L,   agree=0.764, adj=0.021, (3 split)
      english.learner splits as  LR,       agree=0.764, adj=0.021, (0 split)

Node number 23: 255 observations,    complexity param=0.001895898
  predicted class=No meaningful emp NE  expected loss=0.3568627  P(node) =0.01601055
    class counts:    91   164
   probabilities: 0.357 0.643 
  left son=46 (51 obs) right son=47 (204 obs)
  Primary splits:
      total.cte.courses.taken   &lt; 3.5  to the right, improve=2.9823530, (0 missing)
      MCA.R                     &lt; 1.5  to the right, improve=2.5568930, (12 missing)
      ACTCompositeScore         &lt; 14.5 to the left,  improve=1.4308430, (144 missing)
      ps.grad.location          splits as  --L-R--,  improve=1.2670980, (0 missing)
      ps.grad.InstitutionSector splits as  RR-RL--,  improve=0.9206478, (0 missing)
  Surrogate splits:
      cte.achievement splits as  LRR, agree=0.808, adj=0.039, (0 split)

Node number 34: 369 observations
  predicted class=Meaningful emp NE     expected loss=0.3739837  P(node) =0.0231682
    class counts:   231   138
   probabilities: 0.626 0.374 

Node number 35: 332 observations,    complexity param=0.002412961
  predicted class=Meaningful emp NE     expected loss=0.496988  P(node) =0.02084511
    class counts:   167   165
   probabilities: 0.503 0.497 
  left son=70 (119 obs) right son=71 (213 obs)
  Primary splits:
      Gender                  splits as  RL,       improve=3.2518760, (0 missing)
      ACTCompositeScore       &lt; 22.5 to the left,  improve=2.0909150, (91 missing)
      MCA.S                   &lt; 2.5  to the right, improve=1.2756660, (51 missing)
      ap.exam                 splits as  RL,       improve=1.1928210, (0 missing)
      total.cte.courses.taken &lt; 0.5  to the right, improve=0.7784897, (0 missing)
  Surrogate splits:
      total.cte.courses.taken &lt; 3.5  to the right, agree=0.648, adj=0.017, (0 split)

Node number 44: 154 observations,    complexity param=0.001723544
  predicted class=Meaningful emp NE     expected loss=0.461039  P(node) =0.009669115
    class counts:    83    71
   probabilities: 0.539 0.461 
  left son=88 (70 obs) right son=89 (84 obs)
  Primary splits:
      MCA.S             &lt; 2.5  to the left,  improve=2.0127950, (14 missing)
      Dem_Desc          splits as  LLR,      improve=1.7034820, (0 missing)
      grad.year.covid   splits as  LR,       improve=1.1592280, (0 missing)
      MCA.M             &lt; 2.5  to the left,  improve=1.1442540, (3 missing)
      ACTCompositeScore &lt; 18.5 to the right, improve=0.9545746, (89 missing)
  Surrogate splits:
      MCA.R           &lt; 3.5  to the left,  agree=0.750, adj=0.426, (10 split)
      MCA.M           &lt; 2.5  to the left,  agree=0.679, adj=0.262, (1 split)
      SpecialEdStatus splits as  RL,       agree=0.643, adj=0.180, (3 split)
      economic.status splits as  RL,       agree=0.600, adj=0.082, (0 split)
      took.ACT        splits as  LR,       agree=0.600, adj=0.082, (0 split)

Node number 45: 48 observations
  predicted class=No meaningful emp NE  expected loss=0.3125  P(node) =0.00301375
    class counts:    15    33
   probabilities: 0.312 0.688 

Node number 46: 51 observations,    complexity param=0.001895898
  predicted class=Meaningful emp NE     expected loss=0.4901961  P(node) =0.00320211
    class counts:    26    25
   probabilities: 0.510 0.490 
  left son=92 (19 obs) right son=93 (32 obs)
  Primary splits:
      took.ACT        splits as  RL,       improve=4.736907, (0 missing)
      MCA.R           &lt; 1.5  to the right, improve=2.315482, (1 missing)
      economic.status splits as  LR,       improve=2.198271, (0 missing)
      MCA.M           &lt; 3.5  to the right, improve=1.850365, (1 missing)
      SpecialEdStatus splits as  LR,       improve=1.576560, (0 missing)
  Surrogate splits:
      RaceEthnicity splits as  L----R, agree=0.647, adj=0.053, (0 split)

Node number 47: 204 observations
  predicted class=No meaningful emp NE  expected loss=0.3186275  P(node) =0.01280844
    class counts:    65   139
   probabilities: 0.319 0.681 

Node number 70: 119 observations
  predicted class=Meaningful emp NE     expected loss=0.4033613  P(node) =0.007471589
    class counts:    71    48
   probabilities: 0.597 0.403 

Node number 71: 213 observations
  predicted class=No meaningful emp NE  expected loss=0.4507042  P(node) =0.01337352
    class counts:    96   117
   probabilities: 0.451 0.549 

Node number 88: 70 observations
  predicted class=Meaningful emp NE     expected loss=0.3857143  P(node) =0.004395052
    class counts:    43    27
   probabilities: 0.614 0.386 

Node number 89: 84 observations,    complexity param=0.001723544
  predicted class=No meaningful emp NE  expected loss=0.4761905  P(node) =0.005274063
    class counts:    40    44
   probabilities: 0.476 0.524 
  left son=178 (54 obs) right son=179 (30 obs)
  Primary splits:
      ACTCompositeScore &lt; 18.5 to the right, improve=3.042222, (39 missing)
      MCA.M             &lt; 3.5  to the right, improve=2.024336, (1 missing)
      Dem_Desc          splits as  -LR,      improve=1.961783, (0 missing)
      took.ACT          splits as  RL,       improve=1.221001, (0 missing)
      MCA.S             &lt; 3.5  to the right, improve=1.036278, (5 missing)
  Surrogate splits:
      MCA.R                   &lt; 3.5  to the right, agree=0.778, adj=0.50, (38 split)
      MCA.M                   &lt; 3.5  to the right, agree=0.711, adj=0.35, (1 split)
      total.cte.courses.taken &lt; 3.5  to the left,  agree=0.667, adj=0.25, (0 split)
      cte.achievement         splits as  RLL,      agree=0.644, adj=0.20, (0 split)
      economic.status         splits as  LR,       agree=0.622, adj=0.15, (0 split)

Node number 92: 19 observations
  predicted class=Meaningful emp NE     expected loss=0.2105263  P(node) =0.001192943
    class counts:    15     4
   probabilities: 0.789 0.211 

Node number 93: 32 observations
  predicted class=No meaningful emp NE  expected loss=0.34375  P(node) =0.002009167
    class counts:    11    21
   probabilities: 0.344 0.656 

Node number 178: 54 observations,    complexity param=0.001723544
  predicted class=Meaningful emp NE     expected loss=0.462963  P(node) =0.003390469
    class counts:    29    25
   probabilities: 0.537 0.463 
  left son=356 (25 obs) right son=357 (29 obs)
  Primary splits:
      took.ACT          splits as  RL,       improve=3.1166790, (0 missing)
      Dem_Desc          splits as  -LR,      improve=2.0623780, (0 missing)
      MCA.M             &lt; 3.5  to the right, improve=1.8148150, (0 missing)
      ACTCompositeScore &lt; 21.5 to the left,  improve=1.7851280, (29 missing)
      MCA.S             &lt; 3.5  to the right, improve=0.9259347, (3 missing)
  Surrogate splits:
      total.cte.courses.taken   &lt; 3.5  to the left,  agree=0.722, adj=0.40, (0 split)
      cte.achievement           splits as  RRL,      agree=0.685, adj=0.32, (0 split)
      ps.grad.InstitutionSector splits as  LL--R--,  agree=0.667, adj=0.28, (0 split)
      highest.cred.level        splits as  --RL--,   agree=0.667, adj=0.28, (0 split)
      MCA.M                     &lt; 3.5  to the right, agree=0.667, adj=0.28, (0 split)

Node number 179: 30 observations
  predicted class=No meaningful emp NE  expected loss=0.3666667  P(node) =0.001883594
    class counts:    11    19
   probabilities: 0.367 0.633 

Node number 356: 25 observations
  predicted class=Meaningful emp NE     expected loss=0.28  P(node) =0.001569662
    class counts:    18     7
   probabilities: 0.720 0.280 

Node number 357: 29 observations
  predicted class=No meaningful emp NE  expected loss=0.3793103  P(node) =0.001820807
    class counts:    11    18
   probabilities: 0.379 0.621 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Plot tree</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="fu">rpart.plot</span>(meaningful.emp.ne.grad.year.<span class="fl">1.</span>model.postprune)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="analysis_local_employment_CART_files/figure-html/postpruning meaningful emp NE grad year 1-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Examine the complexity plot</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="fu">printcp</span>(meaningful.emp.ne.grad.year.<span class="fl">1.</span>model.postprune)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Classification tree:
rpart(formula = grad.year.1 ~ ., data = train, method = "class", 
    control = rpart.control(cp = 0))

Variables actually used in tree construction:
 [1] ACTCompositeScore       cte.achievement         Gender                 
 [4] highest.cred.level      MCA.M                   MCA.S                  
 [7] ps.grad.location        RaceEthnicity           took.ACT               
[10] total.cte.courses.taken

Root node error: 2901/15927 = 0.18214

n= 15927 

         CP nsplit rel error  xerror     xstd
1 0.0268873      0   1.00000 1.00000 0.016791
2 0.0220614      1   0.97311 0.99862 0.016782
3 0.0051706      2   0.95105 0.95105 0.016463
4 0.0031024      3   0.94588 0.95209 0.016471
5 0.0024130      4   0.94278 0.95312 0.016478
6 0.0020683      7   0.93554 0.95863 0.016515
7 0.0018959      9   0.93140 0.95691 0.016503
8 0.0017235     11   0.92761 0.95140 0.016466
9 0.0017235     14   0.92244 0.94726 0.016437</code></pre>
</div>
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plotcp</span>(meaningful.emp.ne.grad.year.<span class="fl">1.</span>model.postprune)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="analysis_local_employment_CART_files/figure-html/postpruning meaningful emp NE grad year 1-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Compute the accuracy of the pruned tree</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>test<span class="sc">$</span>pred <span class="ot">&lt;-</span> <span class="fu">predict</span>(meaningful.emp.ne.grad.year.<span class="fl">1.</span>model.postprune, test, <span class="at">type =</span> <span class="st">"class"</span>)</span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>accuracy_postprun <span class="ot">&lt;-</span> <span class="fu">mean</span>(test<span class="sc">$</span>pred <span class="sc">==</span> test<span class="sc">$</span>grad.year<span class="fl">.1</span>)</span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a>accuracy_postprun</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.8270104</code></pre>
</div>
</div>
<p><br></p>
<p>We still end up with a highly complex tree that is difficult to interpret. Let’s check to see what variables are considered important.</p>
<p>It tells me the following;</p>
<ul>
<li>post-secondary pathways still important</li>
<li>RaceEthnicity is important</li>
<li>CTE and post-secondary prep are still important</li>
<li>Missing from base run
<ul>
<li>MCA.S</li>
<li>pseo.participant</li>
</ul></li>
</ul>
<p><br></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>meaningful.emp.ne.grad.year.<span class="fl">1.</span>model.postprune<span class="sc">$</span>variable.importance</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>         ps.grad.location ps.grad.InstitutionSector        highest.cred.level 
              361.0333293               243.4339058               177.5458344 
                  ps.grad             RaceEthnicity   total.cte.courses.taken 
              113.8582896                10.3692414                 9.4569868 
                 took.ACT           cte.achievement                    Gender 
                8.6859958                 7.9109671                 7.5192791 
                    MCA.M         ACTCompositeScore                     MCA.R 
                6.3371827                 6.1385616                 4.7298046 
                    MCA.S           SpecialEdStatus           grad.year.covid 
                2.0127946                 1.9481011                 1.2421038 
          english.learner           economic.status                   ap.exam 
                0.7506182                 0.7315116                 0.3345011 </code></pre>
</div>
</div>
<p><br></p>
<p>Now let’s compare the accuracy. The post-pruned tree does get a bit better accuracy.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="fu">data.frame</span>(base_accuracy, accuracy_preprun, accuracy_postprun)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  base_accuracy accuracy_preprun accuracy_postprun
1       0.80416         0.826571         0.8270104</code></pre>
</div>
</div>
</section>
<section id="summary" class="level3">
<h3 class="anchored" data-anchor-id="summary">Summary</h3>
<p>The variable importance across the models do not vary much. The most consistent variables that were high in the importance values were;</p>
<ul>
<li>Post-secondary pathway
<ul>
<li>ps.grad.location</li>
<li>ps.grad.InstitutionSector</li>
<li>highest.cred.level</li>
<li>ps.grad</li>
</ul></li>
<li>CTE engagement</li>
<li>RaceEthnicity</li>
<li>College prepwork
<ul>
<li>took.ACT</li>
<li>ACTCompositeScore</li>
<li>MCA.M</li>
<li>MCA.R</li>
</ul></li>
<li>Other demographics</li>
</ul>
<p><br></p>
</section>
</section>
<section id="five-years-after-graduation" class="level2">
<h2 class="anchored" data-anchor-id="five-years-after-graduation">Five years after graduation</h2>
<p>Next we will look at the variables importance at five years after graduation. At this point we will bring back the post-secondary variables.</p>
<div class="cell">
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;">x</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Gender</td>
</tr>
<tr class="even">
<td style="text-align: left;">grad.year.covid</td>
</tr>
<tr class="odd">
<td style="text-align: left;">economic.status</td>
</tr>
<tr class="even">
<td style="text-align: left;">pseo.participant</td>
</tr>
<tr class="odd">
<td style="text-align: left;">SpecialEdStatus</td>
</tr>
<tr class="even">
<td style="text-align: left;">RaceEthnicity</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Dem_Desc</td>
</tr>
<tr class="even">
<td style="text-align: left;">took.ACT</td>
</tr>
<tr class="odd">
<td style="text-align: left;">ap.exam</td>
</tr>
<tr class="even">
<td style="text-align: left;">cte.achievement</td>
</tr>
<tr class="odd">
<td style="text-align: left;">english.learner</td>
</tr>
<tr class="even">
<td style="text-align: left;">ps.grad</td>
</tr>
<tr class="odd">
<td style="text-align: left;">ps.grad.InstitutionSector</td>
</tr>
<tr class="even">
<td style="text-align: left;">highest.cred.level</td>
</tr>
<tr class="odd">
<td style="text-align: left;">ps.grad.location</td>
</tr>
<tr class="even">
<td style="text-align: left;">ACTCompositeScore</td>
</tr>
<tr class="odd">
<td style="text-align: left;">MCA.M</td>
</tr>
<tr class="even">
<td style="text-align: left;">MCA.R</td>
</tr>
<tr class="odd">
<td style="text-align: left;">MCA.S</td>
</tr>
<tr class="even">
<td style="text-align: left;">total.cte.courses.taken</td>
</tr>
<tr class="odd">
<td style="text-align: left;">grad.year.5</td>
</tr>
</tbody>
</table>
</div>
</div>
<section id="base-model-1" class="level3">
<h3 class="anchored" data-anchor-id="base-model-1">Base model</h3>
<p>First we will split the data into two sets, Train and Test, in a 70:30 ratio. The Train set is used for training and creating the model. The Test set is considered to be a dummy production environment to test predictions and evaluate the accuracy of the model.</p>
<p><br></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">1234</span>)</span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>sample_ind <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="fu">nrow</span>(meaningful.emp.ne.grad.year<span class="fl">.5</span>), <span class="fu">nrow</span>(meaningful.emp.ne.grad.year<span class="fl">.5</span>) <span class="sc">*</span>.<span class="dv">7</span>)</span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a>train <span class="ot">&lt;-</span> meaningful.emp.ne.grad.year<span class="fl">.5</span>[sample_ind,]</span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a>test <span class="ot">&lt;-</span> meaningful.emp.ne.grad.year<span class="fl">.5</span>[<span class="sc">-</span>sample_ind,]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Next, we create a decision tree model by calling the rpart function. Let’s first create a base model with default parameters and value. The CP (complexity parameter) is used to control tree growth. If the cost of adding a variable is higher then the value of CP, then tree growth stops.</p>
<p><br></p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="analysis_local_employment_CART_files/figure-html/decision tree plot meaningful emp ne grad year 5-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Classification tree:
rpart(formula = grad.year.5 ~ ., data = train, method = "class", 
    cp = 0)

Variables actually used in tree construction:
 [1] ACTCompositeScore         ap.exam                  
 [3] cte.achievement           Dem_Desc                 
 [5] economic.status           english.learner          
 [7] Gender                    highest.cred.level       
 [9] MCA.M                     MCA.R                    
[11] MCA.S                     ps.grad                  
[13] ps.grad.InstitutionSector ps.grad.location         
[15] pseo.participant          RaceEthnicity            
[17] SpecialEdStatus           took.ACT                 
[19] total.cte.courses.taken  

Root node error: 3866/19682 = 0.19642

n= 19682 

           CP nsplit rel error xerror     xstd
1  4.2327e-04      0   1.00000 1.0000 0.014417
2  4.0237e-04     55   0.96767 1.0375 0.014618
3  3.8800e-04     67   0.96146 1.0411 0.014637
4  3.2333e-04     77   0.95706 1.0491 0.014678
5  2.7856e-04     87   0.95370 1.0515 0.014690
6  2.5867e-04    102   0.94904 1.0678 0.014774
7  2.2171e-04    128   0.94128 1.0763 0.014817
8  2.0693e-04    138   0.93844 1.0828 0.014850
9  1.9400e-04    143   0.93740 1.0872 0.014871
10 1.7552e-04    151   0.93585 1.0936 0.014904
11 1.7244e-04    180   0.93042 1.0986 0.014928
12 1.6461e-04    192   0.92835 1.1032 0.014951
13 1.5520e-04    231   0.92007 1.1055 0.014962
14 1.4781e-04    243   0.91723 1.1099 0.014984
15 1.2933e-04    250   0.91619 1.1301 0.015081
16 1.1086e-04    320   0.90636 1.1342 0.015101
17 1.0347e-04    327   0.90559 1.1410 0.015132
18 8.6222e-05    337   0.90455 1.1495 0.015172
19 7.3904e-05    357   0.90274 1.1526 0.015187
20 6.4666e-05    364   0.90222 1.1637 0.015238
21 5.7481e-05    376   0.90145 1.1681 0.015259
22 4.3111e-05    385   0.90093 1.1780 0.015304
23 3.6952e-05    397   0.90041 1.1839 0.015330
24 3.2333e-05    404   0.90016 1.1849 0.015335
25 2.8741e-05    412   0.89990 1.1849 0.015335
26 2.5867e-05    421   0.89964 1.1852 0.015336
27 0.0000e+00    451   0.89886 1.1860 0.015340</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="analysis_local_employment_CART_files/figure-html/decision tree plot meaningful emp ne grad year 5-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p><br></p>
<p>The resulting model produced a VERY complex tree with too many nodes that it isn’t interpretable. However, examining the complexity parameters shows that I have an increasing cross-validated error which provides evidence of a decision tree with too much complexity.</p>
<p>Below are the values in variable important and there are a couple of themes;</p>
<ol type="1">
<li>Post-secondary pathway are significant</li>
<li>CTE engagement is significant</li>
<li>Post-secondary prep work is significant</li>
<li>Demographics are a bit lower</li>
<li>Difference from grad.year.1
<ol type="1">
<li>ps.grad isn’t as significant.</li>
</ol></li>
</ol>
<p><br></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>meaningful.emp.ne.grad.year.<span class="fl">5.</span>model<span class="sc">$</span>variable.importance</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>         ps.grad.location ps.grad.InstitutionSector        highest.cred.level 
               257.784269                224.518331                171.406351 
  total.cte.courses.taken         ACTCompositeScore                     MCA.M 
               132.033994                114.013375                 85.481208 
                    MCA.R           cte.achievement                   ps.grad 
                69.682098                 68.696886                 64.414053 
                 took.ACT           economic.status                     MCA.S 
                57.170158                 48.954375                 46.837628 
                   Gender          pseo.participant                  Dem_Desc 
                46.050616                 38.494863                 34.188193 
            RaceEthnicity           SpecialEdStatus                   ap.exam 
                33.698163                 23.737000                 17.560684 
          english.learner 
                 6.814636 </code></pre>
</div>
</div>
<p>Next, the accuracy of the model is computed and stored in a variable base_accuracy so we can compare it to our pruned trees later.</p>
<p><br></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>test<span class="sc">$</span>pred <span class="ot">&lt;-</span> <span class="fu">predict</span>(meaningful.emp.ne.grad.year.<span class="fl">5.</span>model, test, <span class="at">type =</span> <span class="st">"class"</span>)</span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>base_accuracy <span class="ot">&lt;-</span> <span class="fu">mean</span>(test<span class="sc">$</span>pred <span class="sc">==</span> test<span class="sc">$</span>grad.year<span class="fl">.5</span>)</span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a>base_accuracy</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.7769085</code></pre>
</div>
</div>
</section>
<section id="pre-pruning-1" class="level3">
<h3 class="anchored" data-anchor-id="pre-pruning-1">Pre-pruning</h3>
<p>Next, we need to prune. We can either pre-prune or post-prune. We will start with pre-pruning and use each method - max depth, min depth, and min bucket.</p>
<p><br></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Grow a tree with minsplit of 40 and max depth of 10</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>meaningful.emp.ne.grad.year.<span class="fl">5.</span>model.preprune <span class="ot">&lt;-</span> <span class="fu">rpart</span>(grad.year<span class="fl">.5</span> <span class="sc">~</span> ., <span class="at">data =</span> train, <span class="at">method =</span> <span class="st">"class"</span>, </span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>                   <span class="at">control =</span> <span class="fu">rpart.control</span>(<span class="at">cp =</span> <span class="dv">0</span>, <span class="at">maxdepth =</span> <span class="dv">5</span>, <span class="at">minsplit =</span> <span class="dv">10</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Plot tree</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a><span class="fu">rpart.plot</span>(meaningful.emp.ne.grad.year.<span class="fl">5.</span>model.preprune)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="analysis_local_employment_CART_files/figure-html/pre pruning plot meaningful emp ne grad year 5-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Examine the complexity plot</span></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a><span class="fu">printcp</span>(meaningful.emp.ne.grad.year.<span class="fl">5.</span>model.preprune)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Classification tree:
rpart(formula = grad.year.5 ~ ., data = train, method = "class", 
    control = rpart.control(cp = 0, maxdepth = 5, minsplit = 10))

Variables actually used in tree construction:
character(0)

Root node error: 3866/19682 = 0.19642

n= 19682 

  CP nsplit rel error xerror xstd
1  0      0         1      0    0</code></pre>
</div>
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plotcp</span>(meaningful.emp.ne.grad.year.<span class="fl">5.</span>model.preprune)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="analysis_local_employment_CART_files/figure-html/pre pruning plot meaningful emp ne grad year 5-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Compute the accuracy of the pruned tree</span></span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a>test<span class="sc">$</span>pred <span class="ot">&lt;-</span> <span class="fu">predict</span>(meaningful.emp.ne.grad.year.<span class="fl">5.</span>model.preprune, test, <span class="at">type =</span> <span class="st">"class"</span>)</span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true" tabindex="-1"></a>accuracy_preprun <span class="ot">&lt;-</span> <span class="fu">mean</span>(test<span class="sc">$</span>pred <span class="sc">==</span> test<span class="sc">$</span>grad.year<span class="fl">.5</span>)</span>
<span id="cb42-6"><a href="#cb42-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-7"><a href="#cb42-7" aria-hidden="true" tabindex="-1"></a>accuracy_preprun</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.8073732</code></pre>
</div>
</div>
<p>The pre-pruning resulted in a significantly less complex tree with a .78 accuracy. Let’s see what variables are important in this model.</p>
<ul>
<li>Post-secondary pathway</li>
<li>Dem_Desc makes a pretty big jump in importance here.</li>
<li>Post-secondary prepwork are higher than before</li>
<li>CTE engagement still important</li>
<li>A few demographic things - english.learner, SpecialEdStatus, Gender</li>
<li>Missing from previous
<ul>
<li>tool.ACT</li>
<li>MCA.S</li>
<li>economic.status</li>
<li>RaceEthnicity</li>
<li>pseo.participant</li>
<li>ap.exam</li>
</ul></li>
</ul>
<p><br></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a>meaningful.emp.ne.grad.year.<span class="fl">5.</span>model.preprune<span class="sc">$</span>variable.importance</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>NULL</code></pre>
</div>
</div>
</section>
<section id="post-pruning-1" class="level3">
<h3 class="anchored" data-anchor-id="post-pruning-1">Post-pruning</h3>
<p>Next, let’s try postpruning. The idea here is to allow the decision tree to grow fully and observe the CP value. Next, we prune/cut the tree with the optimal CP value as the parameter as shown in below code:</p>
<p><br></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Prune the hr_base_model based on the optimal cp value</span></span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a>meaningful.emp.ne.grad.year.<span class="fl">5.</span>model.postprune <span class="ot">&lt;-</span> <span class="fu">prune</span>(meaningful.emp.ne.grad.year.<span class="fl">5.</span>model, <span class="at">cp =</span> .<span class="dv">00049139</span>)</span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a><span class="co">#Summary</span></span>
<span id="cb46-5"><a href="#cb46-5" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(meaningful.emp.ne.grad.year.<span class="fl">5.</span>model.postprune)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Call:
rpart(formula = grad.year.5 ~ ., data = train, method = "class", 
    cp = 0)
  n= 19682 

          CP nsplit rel error xerror       xstd
1 0.00049139      0         1      1 0.01441726

Node number 1: 19682 observations
  predicted class=No meaningful emp NE  expected loss=0.1964231  P(node) =1
    class counts:  3866 15816
   probabilities: 0.196 0.804 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Plot tree</span></span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a><span class="fu">rpart.plot</span>(meaningful.emp.ne.grad.year.<span class="fl">5.</span>model.postprune)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="analysis_local_employment_CART_files/figure-html/postpruning meaningful emp ne grad year 5-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Examine the complexity plot</span></span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a><span class="fu">printcp</span>(meaningful.emp.ne.grad.year.<span class="fl">5.</span>model.postprune)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Classification tree:
rpart(formula = grad.year.5 ~ ., data = train, method = "class", 
    cp = 0)

Variables actually used in tree construction:
character(0)

Root node error: 3866/19682 = 0.19642

n= 19682 

          CP nsplit rel error xerror     xstd
1 0.00049139      0         1      1 0.014417</code></pre>
</div>
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plotcp</span>(meaningful.emp.ne.grad.year.<span class="fl">5.</span>model.postprune)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="analysis_local_employment_CART_files/figure-html/postpruning meaningful emp ne grad year 5-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Compute the accuracy of the pruned tree</span></span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a>test<span class="sc">$</span>pred <span class="ot">&lt;-</span> <span class="fu">predict</span>(meaningful.emp.ne.grad.year.<span class="fl">5.</span>model.postprune, test, <span class="at">type =</span> <span class="st">"class"</span>)</span>
<span id="cb52-4"><a href="#cb52-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-5"><a href="#cb52-5" aria-hidden="true" tabindex="-1"></a>accuracy_postprun <span class="ot">&lt;-</span> <span class="fu">mean</span>(test<span class="sc">$</span>pred <span class="sc">==</span> test<span class="sc">$</span>grad.year<span class="fl">.5</span>)</span>
<span id="cb52-6"><a href="#cb52-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-7"><a href="#cb52-7" aria-hidden="true" tabindex="-1"></a>accuracy_postprun</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.8073732</code></pre>
</div>
</div>
<p><br></p>
<p>We still end up with a highly complex tree that is difficult to interpret. Let’s check to see what variables are considered important.</p>
<ul>
<li>Post-secondary pathways</li>
<li>Post-secondary prep work</li>
<li>CTE engagement</li>
<li>High school geography - Dem_Desc</li>
<li>Demographics</li>
<li>Nothing is missing from this model</li>
</ul>
<p><br></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a>meaningful.emp.ne.grad.year.<span class="fl">5.</span>model.postprune<span class="sc">$</span>variable.importance</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>logical(0)</code></pre>
</div>
</div>
<p><br></p>
<p>Now let’s compare the accuracy. The pre-pruned tree is the most accurate.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="fu">data.frame</span>(base_accuracy, accuracy_preprun, accuracy_postprun)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  base_accuracy accuracy_preprun accuracy_postprun
1     0.7769085        0.8073732         0.8073732</code></pre>
</div>
</div>
<p><br></p>
</section>
<section id="summary-1" class="level3">
<h3 class="anchored" data-anchor-id="summary-1">Summary</h3>
<p>Overall, the variables that were the most consistently important throughout the analysis were;</p>
<ul>
<li>Post-secondary pathways
<ul>
<li>ps.grad.location</li>
<li>ps.grad.InstitutionSector</li>
<li>highest.cred.level</li>
</ul></li>
<li>Post-secondary prep-work
<ul>
<li>ACTCompositeScore</li>
<li>MCA.M</li>
<li>MCA.R</li>
</ul></li>
<li>CTE engagement
<ul>
<li>total.cte.courses.taken</li>
<li>cte.achievement</li>
</ul></li>
<li>Demographics
<ul>
<li>Gender</li>
<li>Economic status</li>
<li>RaceEthnicty</li>
</ul></li>
</ul>
<p><br></p>
</section>
</section>
<section id="ten-years-after-graduation" class="level2">
<h2 class="anchored" data-anchor-id="ten-years-after-graduation">Ten years after graduation</h2>
<p>Next we will look at the variables importance at five years after graduation. At this point we will bring back the post-secondary variables.</p>
<div class="cell">
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;">x</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Gender</td>
</tr>
<tr class="even">
<td style="text-align: left;">grad.year.covid</td>
</tr>
<tr class="odd">
<td style="text-align: left;">economic.status</td>
</tr>
<tr class="even">
<td style="text-align: left;">pseo.participant</td>
</tr>
<tr class="odd">
<td style="text-align: left;">SpecialEdStatus</td>
</tr>
<tr class="even">
<td style="text-align: left;">RaceEthnicity</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Dem_Desc</td>
</tr>
<tr class="even">
<td style="text-align: left;">took.ACT</td>
</tr>
<tr class="odd">
<td style="text-align: left;">ap.exam</td>
</tr>
<tr class="even">
<td style="text-align: left;">cte.achievement</td>
</tr>
<tr class="odd">
<td style="text-align: left;">english.learner</td>
</tr>
<tr class="even">
<td style="text-align: left;">ps.grad</td>
</tr>
<tr class="odd">
<td style="text-align: left;">ps.grad.InstitutionSector</td>
</tr>
<tr class="even">
<td style="text-align: left;">highest.cred.level</td>
</tr>
<tr class="odd">
<td style="text-align: left;">ps.grad.location</td>
</tr>
<tr class="even">
<td style="text-align: left;">ACTCompositeScore</td>
</tr>
<tr class="odd">
<td style="text-align: left;">MCA.M</td>
</tr>
<tr class="even">
<td style="text-align: left;">MCA.R</td>
</tr>
<tr class="odd">
<td style="text-align: left;">MCA.S</td>
</tr>
<tr class="even">
<td style="text-align: left;">total.cte.courses.taken</td>
</tr>
<tr class="odd">
<td style="text-align: left;">grad.year.10</td>
</tr>
</tbody>
</table>
</div>
</div>
<p><br></p>
<section id="base-model-2" class="level3">
<h3 class="anchored" data-anchor-id="base-model-2">Base model</h3>
<p>First we will split the data into two sets, Train and Test, in a 70:30 ratio. The Train set is used for training and creating the model. The Test set is considered to be a dummy production environment to test predictions and evaluate the accuracy of the model.</p>
<p><br></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">1234</span>)</span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-3"><a href="#cb58-3" aria-hidden="true" tabindex="-1"></a>sample_ind <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="fu">nrow</span>(meaningful.emp.ne.grad.year<span class="fl">.10</span>), <span class="fu">nrow</span>(meaningful.emp.ne.grad.year<span class="fl">.10</span>) <span class="sc">*</span>.<span class="dv">7</span>)</span>
<span id="cb58-4"><a href="#cb58-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-5"><a href="#cb58-5" aria-hidden="true" tabindex="-1"></a>train <span class="ot">&lt;-</span> meaningful.emp.ne.grad.year<span class="fl">.10</span>[sample_ind,]</span>
<span id="cb58-6"><a href="#cb58-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-7"><a href="#cb58-7" aria-hidden="true" tabindex="-1"></a>test <span class="ot">&lt;-</span> meaningful.emp.ne.grad.year<span class="fl">.10</span>[<span class="sc">-</span>sample_ind,]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Next, we create a decision tree model by calling the rpart function. Let’s first create a base model with default parameters and value. The CP (complexity parameter) is used to control tree growth. If the cost of adding a variable is higher then the value of CP, then tree growth stops.</p>
<p><br></p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="analysis_local_employment_CART_files/figure-html/decision tree plot meaningful emp ne grad year 10-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Classification tree:
rpart(formula = grad.year.10 ~ ., data = train, method = "class", 
    cp = 0)

Variables actually used in tree construction:
 [1] ACTCompositeScore         ap.exam                  
 [3] cte.achievement           Dem_Desc                 
 [5] economic.status           english.learner          
 [7] Gender                    highest.cred.level       
 [9] MCA.M                     MCA.R                    
[11] MCA.S                     ps.grad.InstitutionSector
[13] ps.grad.location          pseo.participant         
[15] RaceEthnicity             SpecialEdStatus          
[17] took.ACT                  total.cte.courses.taken  

Root node error: 2414/13817 = 0.17471

n= 13817 

           CP nsplit rel error xerror     xstd
1  9.6658e-04      0   1.00000 1.0000 0.018490
2  6.9042e-04      3   0.99710 1.0033 0.018514
3  6.6280e-04     27   0.97597 1.0108 0.018568
4  4.1425e-04     32   0.97266 1.0236 0.018660
5  3.6247e-04     38   0.97017 1.0319 0.018719
6  3.1069e-04     56   0.95940 1.0456 0.018815
7  2.0713e-04     60   0.95816 1.0758 0.019023
8  1.8411e-04    119   0.94118 1.0973 0.019168
9  1.6570e-04    128   0.93952 1.1102 0.019253
10 1.3808e-04    147   0.93621 1.1276 0.019367
11 1.0356e-04    159   0.93455 1.1292 0.019378
12 9.2056e-05    163   0.93413 1.1408 0.019452
13 8.2850e-05    174   0.93289 1.1466 0.019489
14 6.9042e-05    184   0.93206 1.1558 0.019547
15 5.9179e-05    190   0.93165 1.1607 0.019579
16 5.1781e-05    215   0.92999 1.1665 0.019615
17 3.7659e-05    223   0.92958 1.1698 0.019636
18 0.0000e+00    234   0.92916 1.1715 0.019646</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="analysis_local_employment_CART_files/figure-html/decision tree plot meaningful emp ne grad year 10-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p><br></p>
<p>The resulting model produced a VERY complex tree with too many nodes that it isn’t interpretable. However, examining the complexity parameters shows that I have an increasing cross-validated error which provides evidence of a decision tree with too much complexity.</p>
<p>Below are the values in variable important and it shows the following themes are important;</p>
<ul>
<li>Post-secondary pathway</li>
<li>CTE engagement</li>
<li>Post-secondary prep work</li>
<li>high school geography</li>
<li>Demographics
<ul>
<li>Gender</li>
<li>RaceEthnicity</li>
</ul></li>
</ul>
<p><br></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a>meaningful.emp.ne.grad.year.<span class="fl">10.</span>model<span class="sc">$</span>variable.importance</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>         ps.grad.location ps.grad.InstitutionSector   total.cte.courses.taken 
                99.181176                 91.050109                 82.447653 
       highest.cred.level         ACTCompositeScore                     MCA.M 
                79.534899                 51.104593                 45.881953 
          cte.achievement                     MCA.R                  Dem_Desc 
                43.299685                 41.732476                 30.347816 
         pseo.participant           economic.status             RaceEthnicity 
                20.819982                 19.656473                 19.188605 
                   Gender                  took.ACT                   ap.exam 
                18.887362                 15.720334                 14.012445 
          SpecialEdStatus                   ps.grad                     MCA.S 
                12.077349                  9.642591                  8.389857 
          english.learner 
                 4.738945 </code></pre>
</div>
</div>
<p>Next, the accuracy of the model is computed and stored in a variable base_accuracy so we can compare it to our pruned trees later.</p>
<p><br></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a>test<span class="sc">$</span>pred <span class="ot">&lt;-</span> <span class="fu">predict</span>(meaningful.emp.ne.grad.year.<span class="fl">10.</span>model, test, <span class="at">type =</span> <span class="st">"class"</span>)</span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-3"><a href="#cb62-3" aria-hidden="true" tabindex="-1"></a>base_accuracy <span class="ot">&lt;-</span> <span class="fu">mean</span>(test<span class="sc">$</span>pred <span class="sc">==</span> test<span class="sc">$</span>grad.year<span class="fl">.10</span>)</span>
<span id="cb62-4"><a href="#cb62-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-5"><a href="#cb62-5" aria-hidden="true" tabindex="-1"></a>base_accuracy</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.8112124</code></pre>
</div>
</div>
</section>
<section id="pre-pruning-2" class="level3">
<h3 class="anchored" data-anchor-id="pre-pruning-2">Pre-pruning</h3>
<p>Next, we need to prune. We can either pre-prune or post-prune. We will start with pre-pruning and use each method - max depth, min depth, and min bucket.</p>
<p><br></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Grow a tree with minsplit of 40 and max depth of 10</span></span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a>meaningful.emp.ne.grad.year.<span class="fl">10.</span>model.preprune <span class="ot">&lt;-</span> <span class="fu">rpart</span>(grad.year<span class="fl">.10</span> <span class="sc">~</span> ., <span class="at">data =</span> train, <span class="at">method =</span> <span class="st">"class"</span>, </span>
<span id="cb64-3"><a href="#cb64-3" aria-hidden="true" tabindex="-1"></a>                   <span class="at">control =</span> <span class="fu">rpart.control</span>(<span class="at">cp =</span> <span class="dv">0</span>, <span class="at">maxdepth =</span> <span class="dv">7</span>, <span class="at">minsplit =</span> <span class="dv">40</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Plot tree</span></span>
<span id="cb65-2"><a href="#cb65-2" aria-hidden="true" tabindex="-1"></a><span class="fu">rpart.plot</span>(meaningful.emp.ne.grad.year.<span class="fl">10.</span>model.preprune)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="analysis_local_employment_CART_files/figure-html/pre pruning plot meaningful emp ne grad year 10-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Examine the complexity plot</span></span>
<span id="cb66-2"><a href="#cb66-2" aria-hidden="true" tabindex="-1"></a><span class="fu">printcp</span>(meaningful.emp.ne.grad.year.<span class="fl">10.</span>model.preprune)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Classification tree:
rpart(formula = grad.year.10 ~ ., data = train, method = "class", 
    control = rpart.control(cp = 0, maxdepth = 7, minsplit = 40))

Variables actually used in tree construction:
[1] ACTCompositeScore         cte.achievement          
[3] Dem_Desc                  Gender                   
[5] ps.grad.InstitutionSector ps.grad.location         
[7] SpecialEdStatus           total.cte.courses.taken  

Root node error: 2414/13817 = 0.17471

n= 13817 

          CP nsplit rel error xerror     xstd
1 0.00096658      0   1.00000 1.0000 0.018490
2 0.00041425      3   0.99710 1.0037 0.018517
3 0.00013808      8   0.99503 1.0046 0.018523
4 0.00000000     11   0.99461 1.0104 0.018565</code></pre>
</div>
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plotcp</span>(meaningful.emp.ne.grad.year.<span class="fl">10.</span>model.preprune)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="analysis_local_employment_CART_files/figure-html/pre pruning plot meaningful emp ne grad year 10-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Compute the accuracy of the pruned tree</span></span>
<span id="cb69-2"><a href="#cb69-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-3"><a href="#cb69-3" aria-hidden="true" tabindex="-1"></a>test<span class="sc">$</span>pred <span class="ot">&lt;-</span> <span class="fu">predict</span>(meaningful.emp.ne.grad.year.<span class="fl">10.</span>model.preprune, test, <span class="at">type =</span> <span class="st">"class"</span>)</span>
<span id="cb69-4"><a href="#cb69-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-5"><a href="#cb69-5" aria-hidden="true" tabindex="-1"></a>accuracy_preprun <span class="ot">&lt;-</span> <span class="fu">mean</span>(test<span class="sc">$</span>pred <span class="sc">==</span> test<span class="sc">$</span>grad.year<span class="fl">.10</span>)</span>
<span id="cb69-6"><a href="#cb69-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-7"><a href="#cb69-7" aria-hidden="true" tabindex="-1"></a>accuracy_preprun</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.8308004</code></pre>
</div>
</div>
<p><br></p>
<p>The pre-pruning resulted in a significantly less complex tree with a .83 accuracy. Let’s see what variables are important in this model.</p>
<p>This model does indicate a difference in importance when pruned.</p>
<ul>
<li>Post-secondary pathway</li>
<li>CTE engagement</li>
<li>High school geography</li>
<li>A few demographics
<ul>
<li>Economic status</li>
<li>SpecialEdStatus</li>
<li>RaceEthnicty</li>
</ul></li>
</ul>
<p><br></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb71"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a>meaningful.emp.ne.grad.year.<span class="fl">10.</span>model.preprune<span class="sc">$</span>variable.importance</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>         ps.grad.location ps.grad.InstitutionSector        highest.cred.level 
               67.4330538                40.5962022                30.4386947 
  total.cte.courses.taken                  Dem_Desc         ACTCompositeScore 
               17.1419845                13.4021158                 5.7003160 
          SpecialEdStatus           cte.achievement                    Gender 
                4.4392649                 3.6232465                 2.5614962 
                    MCA.R                     MCA.M                   ap.exam 
                2.1670941                 1.7943894                 0.7845237 
          english.learner             RaceEthnicity           economic.status 
                0.4831853                 0.2095518                 0.1942373 
                 took.ACT 
                0.1294916 </code></pre>
</div>
</div>
<p><br></p>
</section>
<section id="post-pruning-2" class="level3">
<h3 class="anchored" data-anchor-id="post-pruning-2">Post-pruning</h3>
<p>Next, let’s try postpruning. The idea here is to allow the decision tree to grow fully and observe the CP value. Next, we prune/cut the tree with the optimal CP value as the parameter as shown in below code:</p>
<p><br></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Prune the hr_base_model based on the optimal cp value</span></span>
<span id="cb73-2"><a href="#cb73-2" aria-hidden="true" tabindex="-1"></a>meaningful.emp.ne.grad.year.<span class="fl">10.</span>model.postprune <span class="ot">&lt;-</span> <span class="fu">prune</span>(meaningful.emp.ne.grad.year.<span class="fl">10.</span>model, <span class="at">cp =</span> .<span class="dv">00062189</span>)</span>
<span id="cb73-3"><a href="#cb73-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-4"><a href="#cb73-4" aria-hidden="true" tabindex="-1"></a><span class="co">#Summary</span></span>
<span id="cb73-5"><a href="#cb73-5" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(meaningful.emp.ne.grad.year.<span class="fl">10.</span>model.postprune)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Call:
rpart(formula = grad.year.10 ~ ., data = train, method = "class", 
    cp = 0)
  n= 13817 

            CP nsplit rel error   xerror       xstd
1 0.0009665838      0 1.0000000 1.000000 0.01848988
2 0.0006904170      3 0.9971002 1.003314 0.01851399
3 0.0006628003     27 0.9759735 1.010771 0.01856798
4 0.0006218900     32 0.9726595 1.023612 0.01866009

Variable importance
         ps.grad.location ps.grad.InstitutionSector        highest.cred.level 
                       27                        17                        16 
  total.cte.courses.taken                  Dem_Desc           cte.achievement 
                        8                         5                         4 
                    MCA.M         ACTCompositeScore                     MCA.R 
                        4                         4                         3 
            RaceEthnicity                    Gender           SpecialEdStatus 
                        2                         2                         2 
         pseo.participant                   ap.exam                  took.ACT 
                        2                         1                         1 
          economic.status 
                        1 

Node number 1: 13817 observations,    complexity param=0.0009665838
  predicted class=No meaningful emp NE  expected loss=0.1747123  P(node) =1
    class counts:  2414 11403
   probabilities: 0.175 0.825 
  left son=2 (3161 obs) right son=3 (10656 obs)
  Primary splits:
      ps.grad.location          splits as  RRLRRRR,  improve=67.43305, (1 missing)
      ps.grad.InstitutionSector splits as  RLRRLRR,  improve=42.11749, (1 missing)
      highest.cred.level        splits as  LRLRRR,   improve=33.87195, (1 missing)
      Dem_Desc                  splits as  RRL,      improve=29.91859, (0 missing)
      ACTCompositeScore         &lt; 25.5 to the left,  improve=16.40332, (6508 missing)
  Surrogate splits:
      ps.grad.InstitutionSector splits as  RRRRLRR, agree=0.882, adj=0.484, (0 split)
      highest.cred.level        splits as  LRLRRR,  agree=0.865, adj=0.410, (0 split)

Node number 2: 3161 observations,    complexity param=0.0009665838
  predicted class=No meaningful emp NE  expected loss=0.2654223  P(node) =0.2287761
    class counts:   839  2322
   probabilities: 0.265 0.735 
  left son=4 (2399 obs) right son=5 (762 obs)
  Primary splits:
      Dem_Desc                  splits as  RRL,      improve=13.402120, (0 missing)
      ACTCompositeScore         &lt; 22.5 to the left,  improve= 4.701445, (1165 missing)
      ps.grad.InstitutionSector splits as  RL-LL--,  improve= 4.688029, (0 missing)
      total.cte.courses.taken   &lt; 6.5  to the right, improve= 2.935598, (0 missing)
      economic.status           splits as  LR,       improve= 2.838957, (0 missing)
  Surrogate splits:
      total.cte.courses.taken &lt; 13.5 to the left,  agree=0.759, adj=0.001, (0 split)

Node number 3: 10656 observations
  predicted class=No meaningful emp NE  expected loss=0.1478041  P(node) =0.7712239
    class counts:  1575  9081
   probabilities: 0.148 0.852 

Node number 4: 2399 observations,    complexity param=0.000690417
  predicted class=No meaningful emp NE  expected loss=0.2913714  P(node) =0.1736267
    class counts:   699  1700
   probabilities: 0.291 0.709 
  left son=8 (1475 obs) right son=9 (924 obs)
  Primary splits:
      ACTCompositeScore         &lt; 22.5 to the left,  improve=5.700316, (848 missing)
      ps.grad.InstitutionSector splits as  RL-LL--,  improve=3.611701, (0 missing)
      SpecialEdStatus           splits as  LR,       improve=2.401535, (0 missing)
      economic.status           splits as  LR,       improve=1.921290, (0 missing)
      RaceEthnicity             splits as  LLRL-L,   improve=1.851792, (0 missing)
  Surrogate splits:
      MCA.R                     &lt; 3.5  to the left,  agree=0.701, adj=0.322, (822 split)
      MCA.M                     &lt; 3.5  to the left,  agree=0.698, adj=0.315, (10 split)
      ps.grad.InstitutionSector splits as  RL-RL--,  agree=0.681, adj=0.275, (16 split)
      highest.cred.level        splits as  LRLR--,   agree=0.669, adj=0.249, (0 split)
      ap.exam                   splits as  LR,       agree=0.620, adj=0.138, (0 split)

Node number 5: 762 observations,    complexity param=0.0009665838
  predicted class=No meaningful emp NE  expected loss=0.183727  P(node) =0.05514945
    class counts:   140   622
   probabilities: 0.184 0.816 
  left son=10 (29 obs) right son=11 (733 obs)
  Primary splits:
      total.cte.courses.taken   &lt; 6.5  to the right, improve=11.512440, (0 missing)
      ps.grad.InstitutionSector splits as  RL-LL--,  improve= 2.867758, (0 missing)
      highest.cred.level        splits as  LRLL--,   improve= 2.484231, (0 missing)
      MCA.R                     &lt; 1.5  to the left,  improve= 1.498508, (13 missing)
      RaceEthnicity             splits as  RRLR-L,   improve= 1.253106, (0 missing)

Node number 8: 1475 observations,    complexity param=0.000690417
  predicted class=No meaningful emp NE  expected loss=0.320678  P(node) =0.1067526
    class counts:   473  1002
   probabilities: 0.321 0.679 
  left son=16 (1328 obs) right son=17 (147 obs)
  Primary splits:
      SpecialEdStatus           splits as  LR,       improve=4.439265, (0 missing)
      economic.status           splits as  LR,       improve=3.170224, (0 missing)
      ps.grad.InstitutionSector splits as  RL-RR--,  improve=2.114490, (0 missing)
      MCA.M                     &lt; 1.5  to the right, improve=1.849133, (27 missing)
      total.cte.courses.taken   &lt; 1.5  to the left,  improve=1.800951, (0 missing)
  Surrogate splits:
      english.learner splits as  LR, agree=0.911, adj=0.109, (0 split)

Node number 9: 924 observations,    complexity param=0.0006628003
  predicted class=No meaningful emp NE  expected loss=0.2445887  P(node) =0.06687414
    class counts:   226   698
   probabilities: 0.245 0.755 
  left son=18 (9 obs) right son=19 (915 obs)
  Primary splits:
      RaceEthnicity           splits as  RLRR-R,   improve=1.7577270, (0 missing)
      ACTCompositeScore       &lt; 31.5 to the left,  improve=1.5134420, (241 missing)
      cte.achievement         splits as  LRR,      improve=1.1992820, (0 missing)
      total.cte.courses.taken &lt; 3.5  to the right, improve=0.9791836, (0 missing)
      ap.exam                 splits as  RL,       improve=0.8737751, (0 missing)

Node number 10: 29 observations
  predicted class=Meaningful emp NE     expected loss=0.3793103  P(node) =0.002098864
    class counts:    18    11
   probabilities: 0.621 0.379 

Node number 11: 733 observations
  predicted class=No meaningful emp NE  expected loss=0.1664393  P(node) =0.05305059
    class counts:   122   611
   probabilities: 0.166 0.834 

Node number 16: 1328 observations,    complexity param=0.000690417
  predicted class=No meaningful emp NE  expected loss=0.3335843  P(node) =0.09611348
    class counts:   443   885
   probabilities: 0.334 0.666 
  left son=32 (1181 obs) right son=33 (147 obs)
  Primary splits:
      ps.grad.InstitutionSector splits as  RL-LL--,  improve=2.600216, (0 missing)
      total.cte.courses.taken   &lt; 1.5  to the left,  improve=2.154630, (0 missing)
      ACTCompositeScore         &lt; 21.5 to the right, improve=1.088263, (484 missing)
      economic.status           splits as  LR,       improve=1.072089, (0 missing)
      RaceEthnicity             splits as  LLRL-L,   improve=0.896977, (0 missing)

Node number 17: 147 observations
  predicted class=No meaningful emp NE  expected loss=0.2040816  P(node) =0.01063907
    class counts:    30   117
   probabilities: 0.204 0.796 

Node number 18: 9 observations
  predicted class=Meaningful emp NE     expected loss=0.4444444  P(node) =0.0006513715
    class counts:     5     4
   probabilities: 0.556 0.444 

Node number 19: 915 observations,    complexity param=0.0006628003
  predicted class=No meaningful emp NE  expected loss=0.2415301  P(node) =0.06622277
    class counts:   221   694
   probabilities: 0.242 0.758 
  left son=38 (903 obs) right son=39 (12 obs)
  Primary splits:
      ACTCompositeScore       &lt; 31.5 to the left,  improve=1.4600300, (240 missing)
      RaceEthnicity           splits as  L-RR-L,   improve=1.4186880, (0 missing)
      total.cte.courses.taken &lt; 3.5  to the right, improve=1.0981860, (0 missing)
      cte.achievement         splits as  LRR,      improve=1.0590850, (0 missing)
      highest.cred.level      splits as  RRRL--,   improve=0.8020787, (0 missing)

Node number 32: 1181 observations,    complexity param=0.000690417
  predicted class=No meaningful emp NE  expected loss=0.3446232  P(node) =0.08547442
    class counts:   407   774
   probabilities: 0.345 0.655 
  left son=64 (532 obs) right son=65 (649 obs)
  Primary splits:
      total.cte.courses.taken   &lt; 1.5  to the left,  improve=3.512860, (0 missing)
      MCA.R                     &lt; 3.5  to the right, improve=1.459872, (32 missing)
      ps.grad.InstitutionSector splits as  -L-RR--,  improve=1.386548, (0 missing)
      economic.status           splits as  LR,       improve=1.362448, (0 missing)
      ACTCompositeScore         &lt; 20.5 to the right, improve=1.305249, (476 missing)
  Surrogate splits:
      cte.achievement           splits as  RRL,      agree=0.831, adj=0.626, (0 split)
      Gender                    splits as  LR,       agree=0.589, adj=0.088, (0 split)
      ps.grad.InstitutionSector splits as  -L-LR--,  agree=0.573, adj=0.053, (0 split)
      highest.cred.level        splits as  RLRL--,   agree=0.573, adj=0.053, (0 split)
      MCA.R                     &lt; 3.5  to the right, agree=0.555, adj=0.011, (0 split)

Node number 33: 147 observations,    complexity param=0.000690417
  predicted class=No meaningful emp NE  expected loss=0.244898  P(node) =0.01063907
    class counts:    36   111
   probabilities: 0.245 0.755 
  left son=66 (129 obs) right son=67 (18 obs)
  Primary splits:
      MCA.M             &lt; 1.5  to the right, improve=1.5027510, (5 missing)
      pseo.participant  splits as  RL,       improve=0.6630092, (64 missing)
      cte.achievement   splits as  LLR,      improve=0.6253158, (0 missing)
      ACTCompositeScore &lt; 18.5 to the left,  improve=0.5986621, (8 missing)
      MCA.R             &lt; 3.5  to the left,  improve=0.5776564, (1 missing)

Node number 38: 903 observations,    complexity param=0.0006628003
  predicted class=No meaningful emp NE  expected loss=0.2447398  P(node) =0.06535427
    class counts:   221   682
   probabilities: 0.245 0.755 
  left son=76 (891 obs) right son=77 (12 obs)
  Primary splits:
      RaceEthnicity           splits as  L-RR-L,   improve=1.4569020, (0 missing)
      highest.cred.level      splits as  RRRL--,   improve=1.0155310, (0 missing)
      cte.achievement         splits as  LRR,      improve=0.9913057, (0 missing)
      total.cte.courses.taken &lt; 3.5  to the right, improve=0.9779183, (0 missing)
      ACTCompositeScore       &lt; 23.5 to the right, improve=0.9099562, (240 missing)

Node number 39: 12 observations
  predicted class=No meaningful emp NE  expected loss=0  P(node) =0.0008684953
    class counts:     0    12
   probabilities: 0.000 1.000 

Node number 64: 532 observations,    complexity param=0.000690417
  predicted class=No meaningful emp NE  expected loss=0.387218  P(node) =0.03850329
    class counts:   206   326
   probabilities: 0.387 0.613 
  left son=128 (67 obs) right son=129 (465 obs)
  Primary splits:
      ps.grad.InstitutionSector splits as  -L-RR--,  improve=3.453808, (0 missing)
      ap.exam                   splits as  RL,       improve=2.870072, (0 missing)
      MCA.M                     &lt; 2.5  to the right, improve=2.346597, (14 missing)
      highest.cred.level        splits as  RLRL--,   improve=1.545989, (0 missing)
      ACTCompositeScore         &lt; 18.5 to the right, improve=1.206682, (183 missing)
  Surrogate splits:
      highest.cred.level splits as  RLRR--, agree=0.904, adj=0.239, (0 split)

Node number 65: 649 observations
  predicted class=No meaningful emp NE  expected loss=0.3097072  P(node) =0.04697112
    class counts:   201   448
   probabilities: 0.310 0.690 

Node number 66: 129 observations,    complexity param=0.000690417
  predicted class=No meaningful emp NE  expected loss=0.2713178  P(node) =0.009336325
    class counts:    35    94
   probabilities: 0.271 0.729 
  left son=132 (35 obs) right son=133 (94 obs)
  Primary splits:
      MCA.M             &lt; 2.5  to the left,  improve=3.2643090, (5 missing)
      Gender            splits as  LR,       improve=1.1388840, (0 missing)
      cte.achievement   splits as  LLR,      improve=1.0394980, (0 missing)
      ACTCompositeScore &lt; 18.5 to the left,  improve=0.9729630, (7 missing)
      MCA.R             &lt; 3.5  to the left,  improve=0.9404362, (1 missing)
  Surrogate splits:
      MCA.R              &lt; 2.5  to the left,  agree=0.734, adj=0.057, (4 split)
      RaceEthnicity      splits as  RRRL-R,   agree=0.726, adj=0.029, (1 split)
      highest.cred.level splits as  -RRL--,   agree=0.726, adj=0.029, (0 split)

Node number 67: 18 observations
  predicted class=No meaningful emp NE  expected loss=0.05555556  P(node) =0.001302743
    class counts:     1    17
   probabilities: 0.056 0.944 

Node number 76: 891 observations,    complexity param=0.0006628003
  predicted class=No meaningful emp NE  expected loss=0.2480359  P(node) =0.06448578
    class counts:   221   670
   probabilities: 0.248 0.752 
  left son=152 (263 obs) right son=153 (628 obs)
  Primary splits:
      cte.achievement         splits as  LRR,      improve=1.0291410, (0 missing)
      total.cte.courses.taken &lt; 3.5  to the right, improve=0.9933716, (0 missing)
      highest.cred.level      splits as  RRRL--,   improve=0.9593538, (0 missing)
      ACTCompositeScore       &lt; 23.5 to the right, improve=0.9551729, (236 missing)
      ap.exam                 splits as  RL,       improve=0.9260037, (0 missing)
  Surrogate splits:
      total.cte.courses.taken &lt; 2.5  to the right, agree=0.810, adj=0.357, (0 split)
      english.learner         splits as  RL,       agree=0.707, adj=0.008, (0 split)

Node number 77: 12 observations
  predicted class=No meaningful emp NE  expected loss=0  P(node) =0.0008684953
    class counts:     0    12
   probabilities: 0.000 1.000 

Node number 128: 67 observations,    complexity param=0.000690417
  predicted class=Meaningful emp NE     expected loss=0.4626866  P(node) =0.004849099
    class counts:    36    31
   probabilities: 0.537 0.463 
  left son=256 (52 obs) right son=257 (15 obs)
  Primary splits:
      ACTCompositeScore &lt; 18.5 to the right, improve=1.9299650, (9 missing)
      MCA.M             &lt; 2.5  to the right, improve=1.8590700, (1 missing)
      Gender            splits as  LR,       improve=1.5039090, (0 missing)
      economic.status   splits as  LR,       improve=1.3239590, (0 missing)
      cte.achievement   splits as  RRL,      improve=0.7521793, (0 missing)
  Surrogate splits:
      RaceEthnicity splits as  L--R-L, agree=0.759, adj=0.067, (9 split)

Node number 129: 465 observations,    complexity param=0.000690417
  predicted class=No meaningful emp NE  expected loss=0.3655914  P(node) =0.03365419
    class counts:   170   295
   probabilities: 0.366 0.634 
  left son=258 (322 obs) right son=259 (143 obs)
  Primary splits:
      MCA.M             &lt; 1.5  to the right, improve=1.986920, (13 missing)
      RaceEthnicity     splits as  LRRL-R,   improve=1.749345, (0 missing)
      ap.exam           splits as  RL,       improve=1.284949, (0 missing)
      Gender            splits as  RL,       improve=1.224815, (0 missing)
      ACTCompositeScore &lt; 21.5 to the right, improve=1.118221, (174 missing)
  Surrogate splits:
      MCA.R           &lt; 2.5  to the right, agree=0.706, adj=0.063, (3 split)
      RaceEthnicity   splits as  LRLL-L,   agree=0.688, adj=0.007, (10 split)
      cte.achievement splits as  RLL,      agree=0.688, adj=0.007, (0 split)

Node number 132: 35 observations,    complexity param=0.000690417
  predicted class=No meaningful emp NE  expected loss=0.4571429  P(node) =0.002533111
    class counts:    16    19
   probabilities: 0.457 0.543 
  left son=264 (20 obs) right son=265 (15 obs)
  Primary splits:
      total.cte.courses.taken &lt; 1.5  to the right, improve=3.47142900, (0 missing)
      cte.achievement         splits as  LLR,      improve=2.11968000, (0 missing)
      ACTCompositeScore       &lt; 20.5 to the left,  improve=0.34528480, (0 missing)
      MCA.S                   &lt; 2.5  to the left,  improve=0.10476190, (13 missing)
      Gender                  splits as  LR,       improve=0.03809524, (0 missing)
  Surrogate splits:
      cte.achievement    splits as  LLR,      agree=0.771, adj=0.467, (0 split)
      MCA.R              &lt; 3.5  to the left,  agree=0.657, adj=0.200, (0 split)
      ACTCompositeScore  &lt; 20.5 to the left,  agree=0.629, adj=0.133, (0 split)
      highest.cred.level splits as  -L-R--,   agree=0.600, adj=0.067, (0 split)

Node number 133: 94 observations
  predicted class=No meaningful emp NE  expected loss=0.2021277  P(node) =0.006803213
    class counts:    19    75
   probabilities: 0.202 0.798 

Node number 152: 263 observations,    complexity param=0.0006628003
  predicted class=No meaningful emp NE  expected loss=0.2851711  P(node) =0.01903452
    class counts:    75   188
   probabilities: 0.285 0.715 
  left son=304 (7 obs) right son=305 (256 obs)
  Primary splits:
      highest.cred.level      splits as  RRRL--,   improve=7.3493350, (0 missing)
      ap.exam                 splits as  RL,       improve=2.1650460, (0 missing)
      ACTCompositeScore       &lt; 26.5 to the right, improve=1.3396000, (90 missing)
      total.cte.courses.taken &lt; 6.5  to the left,  improve=0.6635063, (0 missing)
      Gender                  splits as  RL,       improve=0.4255925, (0 missing)

Node number 153: 628 observations
  predicted class=No meaningful emp NE  expected loss=0.2324841  P(node) =0.04545126
    class counts:   146   482
   probabilities: 0.232 0.768 

Node number 256: 52 observations,    complexity param=0.000690417
  predicted class=Meaningful emp NE     expected loss=0.4038462  P(node) =0.00376348
    class counts:    31    21
   probabilities: 0.596 0.404 
  left son=512 (42 obs) right son=513 (10 obs)
  Primary splits:
      cte.achievement         splits as  RRL,      improve=0.9527473, (0 missing)
      Gender                  splits as  LR,       improve=0.8981107, (0 missing)
      MCA.M                   &lt; 1.5  to the left,  improve=0.6311858, (1 missing)
      total.cte.courses.taken &lt; 0.5  to the left,  improve=0.6009615, (0 missing)
      took.ACT                splits as  RL,       improve=0.5009938, (0 missing)

Node number 257: 15 observations
  predicted class=No meaningful emp NE  expected loss=0.3333333  P(node) =0.001085619
    class counts:     5    10
   probabilities: 0.333 0.667 

Node number 258: 322 observations,    complexity param=0.000690417
  predicted class=No meaningful emp NE  expected loss=0.3975155  P(node) =0.02330462
    class counts:   128   194
   probabilities: 0.398 0.602 
  left son=516 (14 obs) right son=517 (308 obs)
  Primary splits:
      RaceEthnicity      splits as  L-LL-R,   improve=1.7619990, (0 missing)
      ap.exam            splits as  RL,       improve=1.7619990, (0 missing)
      economic.status    splits as  LR,       improve=0.8653642, (0 missing)
      ACTCompositeScore  &lt; 19.5 to the right, improve=0.8540580, (104 missing)
      highest.cred.level splits as  RRLL--,   improve=0.3791143, (0 missing)

Node number 259: 143 observations,    complexity param=0.000690417
  predicted class=No meaningful emp NE  expected loss=0.2937063  P(node) =0.01034957
    class counts:    42   101
   probabilities: 0.294 0.706 
  left son=518 (45 obs) right son=519 (98 obs)
  Primary splits:
      cte.achievement           splits as  LLR,      improve=2.9840000, (0 missing)
      Gender                    splits as  RL,       improve=1.2548850, (0 missing)
      ACTCompositeScore         &lt; 19.5 to the left,  improve=0.8467563, (70 missing)
      ps.grad.InstitutionSector splits as  ---RL--,  improve=0.7063015, (0 missing)
      highest.cred.level        splits as  LRLR--,   improve=0.7063015, (0 missing)
  Surrogate splits:
      total.cte.courses.taken &lt; 0.5  to the right, agree=0.783, adj=0.311, (0 split)

Node number 264: 20 observations
  predicted class=Meaningful emp NE     expected loss=0.35  P(node) =0.001447492
    class counts:    13     7
   probabilities: 0.650 0.350 

Node number 265: 15 observations
  predicted class=No meaningful emp NE  expected loss=0.2  P(node) =0.001085619
    class counts:     3    12
   probabilities: 0.200 0.800 

Node number 304: 7 observations
  predicted class=Meaningful emp NE     expected loss=0  P(node) =0.0005066223
    class counts:     7     0
   probabilities: 1.000 0.000 

Node number 305: 256 observations
  predicted class=No meaningful emp NE  expected loss=0.265625  P(node) =0.0185279
    class counts:    68   188
   probabilities: 0.266 0.734 

Node number 512: 42 observations
  predicted class=Meaningful emp NE     expected loss=0.3571429  P(node) =0.003039734
    class counts:    27    15
   probabilities: 0.643 0.357 

Node number 513: 10 observations
  predicted class=No meaningful emp NE  expected loss=0.4  P(node) =0.0007237461
    class counts:     4     6
   probabilities: 0.400 0.600 

Node number 516: 14 observations
  predicted class=Meaningful emp NE     expected loss=0.3571429  P(node) =0.001013245
    class counts:     9     5
   probabilities: 0.643 0.357 

Node number 517: 308 observations,    complexity param=0.000690417
  predicted class=No meaningful emp NE  expected loss=0.3863636  P(node) =0.02229138
    class counts:   119   189
   probabilities: 0.386 0.614 
  left son=1034 (12 obs) right son=1035 (296 obs)
  Primary splits:
      ap.exam           splits as  RL,       improve=1.9621210, (0 missing)
      economic.status   splits as  LR,       improve=1.6853040, (0 missing)
      ACTCompositeScore &lt; 21.5 to the right, improve=0.7437381, (99 missing)
      pseo.participant  splits as  RL,       improve=0.6076204, (129 missing)
      cte.achievement   splits as  LRL,      improve=0.3929487, (0 missing)

Node number 518: 45 observations,    complexity param=0.000690417
  predicted class=No meaningful emp NE  expected loss=0.4444444  P(node) =0.003256857
    class counts:    20    25
   probabilities: 0.444 0.556 
  left son=1036 (15 obs) right son=1037 (30 obs)
  Primary splits:
      MCA.R              &lt; 2.5  to the left,  improve=2.2222220, (0 missing)
      highest.cred.level splits as  LRRR--,   improve=0.8022222, (0 missing)
      Gender             splits as  RL,       improve=0.6554019, (0 missing)
      ACTCompositeScore  &lt; 18.5 to the left,  improve=0.2631579, (26 missing)
      economic.status    splits as  LR,       improve=0.2394636, (0 missing)

Node number 519: 98 observations
  predicted class=No meaningful emp NE  expected loss=0.2244898  P(node) =0.007092712
    class counts:    22    76
   probabilities: 0.224 0.776 

Node number 1034: 12 observations
  predicted class=Meaningful emp NE     expected loss=0.3333333  P(node) =0.0008684953
    class counts:     8     4
   probabilities: 0.667 0.333 

Node number 1035: 296 observations,    complexity param=0.000690417
  predicted class=No meaningful emp NE  expected loss=0.375  P(node) =0.02142288
    class counts:   111   185
   probabilities: 0.375 0.625 
  left son=2070 (213 obs) right son=2071 (83 obs)
  Primary splits:
      economic.status           splits as  LR,       improve=1.6999410, (0 missing)
      highest.cred.level        splits as  RLLL--,   improve=0.9058102, (0 missing)
      ACTCompositeScore         &lt; 21.5 to the right, improve=0.7990493, (98 missing)
      ps.grad.InstitutionSector splits as  ---LR--,  improve=0.7440698, (0 missing)
      MCA.S                     &lt; 1.5  to the left,  improve=0.4388503, (77 missing)

Node number 1036: 15 observations
  predicted class=Meaningful emp NE     expected loss=0.3333333  P(node) =0.001085619
    class counts:    10     5
   probabilities: 0.667 0.333 

Node number 1037: 30 observations
  predicted class=No meaningful emp NE  expected loss=0.3333333  P(node) =0.002171238
    class counts:    10    20
   probabilities: 0.333 0.667 

Node number 2070: 213 observations,    complexity param=0.000690417
  predicted class=No meaningful emp NE  expected loss=0.4084507  P(node) =0.01541579
    class counts:    87   126
   probabilities: 0.408 0.592 
  left son=4140 (82 obs) right son=4141 (131 obs)
  Primary splits:
      highest.cred.level        splits as  RLLL--,   improve=1.6791590, (0 missing)
      ps.grad.InstitutionSector splits as  ---LR--,  improve=0.8413109, (0 missing)
      ACTCompositeScore         &lt; 17.5 to the left,  improve=0.7414882, (65 missing)
      MCA.M                     &lt; 3.5  to the left,  improve=0.4291692, (5 missing)
      pseo.participant          splits as  RL,       improve=0.4257350, (92 missing)
  Surrogate splits:
      ps.grad.InstitutionSector splits as  ---LR--, agree=0.761, adj=0.378, (0 split)
      cte.achievement           splits as  LRR,     agree=0.643, adj=0.073, (0 split)

Node number 2071: 83 observations
  predicted class=No meaningful emp NE  expected loss=0.2891566  P(node) =0.006007093
    class counts:    24    59
   probabilities: 0.289 0.711 

Node number 4140: 82 observations,    complexity param=0.000690417
  predicted class=No meaningful emp NE  expected loss=0.4878049  P(node) =0.005934718
    class counts:    40    42
   probabilities: 0.488 0.512 
  left son=8280 (50 obs) right son=8281 (32 obs)
  Primary splits:
      Gender           splits as  LR,       improve=2.1781100, (0 missing)
      cte.achievement  splits as  RRL,      improve=2.1517340, (0 missing)
      took.ACT         splits as  RL,       improve=1.1749080, (0 missing)
      MCA.S            &lt; 1.5  to the left,  improve=0.8833622, (23 missing)
      pseo.participant splits as  LR,       improve=0.6713287, (34 missing)
  Surrogate splits:
      cte.achievement splits as  RRL, agree=0.744, adj=0.344, (0 split)
      took.ACT        splits as  RL,  agree=0.720, adj=0.281, (0 split)

Node number 4141: 131 observations,    complexity param=0.000690417
  predicted class=No meaningful emp NE  expected loss=0.3587786  P(node) =0.009481074
    class counts:    47    84
   probabilities: 0.359 0.641 
  left son=8282 (52 obs) right son=8283 (79 obs)
  Primary splits:
      Gender           splits as  RL,       improve=2.5664350, (0 missing)
      pseo.participant splits as  RL,       improve=2.1073590, (58 missing)
      MCA.S            &lt; 1.5  to the right, improve=0.6742911, (35 missing)
      cte.achievement  splits as  LLR,      improve=0.4076393, (0 missing)
      MCA.R            &lt; 3.5  to the right, improve=0.3683943, (3 missing)
  Surrogate splits:
      total.cte.courses.taken &lt; 0.5  to the right, agree=0.626, adj=0.058, (0 split)
      MCA.M                   &lt; 3.5  to the right, agree=0.611, adj=0.019, (0 split)

Node number 8280: 50 observations,    complexity param=0.000690417
  predicted class=Meaningful emp NE     expected loss=0.42  P(node) =0.003618731
    class counts:    29    21
   probabilities: 0.580 0.420 
  left son=16560 (18 obs) right son=16561 (32 obs)
  Primary splits:
      pseo.participant          splits as  LR,       improve=1.3630040, (22 missing)
      took.ACT                  splits as  RL,       improve=0.8004762, (0 missing)
      ACTCompositeScore         &lt; 18.5 to the right, improve=0.4761905, (8 missing)
      ps.grad.InstitutionSector splits as  ---LR--,  improve=0.1869231, (0 missing)
      highest.cred.level        splits as  -LRL--,   improve=0.1869231, (0 missing)
  Surrogate splits:
      MCA.S                     &lt; 2.5  to the right, agree=0.679, adj=0.308, (6 split)
      ps.grad.InstitutionSector splits as  ---RL--,  agree=0.607, adj=0.154, (16 split)
      highest.cred.level        splits as  -RLR--,   agree=0.607, adj=0.154, (0 split)
      took.ACT                  splits as  LR,       agree=0.571, adj=0.077, (0 split)
      cte.achievement           splits as  LRR,      agree=0.571, adj=0.077, (0 split)

Node number 8281: 32 observations
  predicted class=No meaningful emp NE  expected loss=0.34375  P(node) =0.002315988
    class counts:    11    21
   probabilities: 0.344 0.656 

Node number 8282: 52 observations,    complexity param=0.000690417
  predicted class=No meaningful emp NE  expected loss=0.4807692  P(node) =0.00376348
    class counts:    25    27
   probabilities: 0.481 0.519 
  left son=16564 (27 obs) right son=16565 (25 obs)
  Primary splits:
      pseo.participant  splits as  RL,       improve=2.5234430, (24 missing)
      MCA.S             &lt; 2.5  to the right, improve=0.7681818, (20 missing)
      ACTCompositeScore &lt; 20.5 to the right, improve=0.7310023, (19 missing)
      MCA.R             &lt; 3.5  to the right, improve=0.6944444, (2 missing)
      MCA.M             &lt; 2.5  to the left,  improve=0.4897959, (3 missing)
  Surrogate splits:
      took.ACT                splits as  RL,       agree=0.571, adj=0.077, (24 split)
      total.cte.courses.taken &lt; 0.5  to the left,  agree=0.571, adj=0.077, (0 split)

Node number 8283: 79 observations
  predicted class=No meaningful emp NE  expected loss=0.278481  P(node) =0.005717594
    class counts:    22    57
   probabilities: 0.278 0.722 

Node number 16560: 18 observations
  predicted class=Meaningful emp NE     expected loss=0.2777778  P(node) =0.001302743
    class counts:    13     5
   probabilities: 0.722 0.278 

Node number 16561: 32 observations,    complexity param=0.000690417
  predicted class=Meaningful emp NE     expected loss=0.5  P(node) =0.002315988
    class counts:    16    16
   probabilities: 0.500 0.500 
  left son=33122 (20 obs) right son=33123 (12 obs)
  Primary splits:
      ps.grad.InstitutionSector splits as  ---LR--,  improve=1.0666670, (0 missing)
      highest.cred.level        splits as  -LRL--,   improve=1.0666670, (0 missing)
      MCA.M                     &lt; 2.5  to the left,  improve=0.4088710, (1 missing)
      ACTCompositeScore         &lt; 19   to the right, improve=0.1481481, (5 missing)
      MCA.R                     &lt; 3.5  to the left,  improve=0.1293255, (1 missing)
  Surrogate splits:
      took.ACT          splits as  RL,       agree=0.781, adj=0.417, (0 split)
      ACTCompositeScore &lt; 16.5 to the right, agree=0.719, adj=0.250, (0 split)
      cte.achievement   splits as  LRL,      agree=0.656, adj=0.083, (0 split)

Node number 16564: 27 observations,    complexity param=0.000690417
  predicted class=Meaningful emp NE     expected loss=0.4444444  P(node) =0.001954114
    class counts:    15    12
   probabilities: 0.556 0.444 
  left son=33128 (12 obs) right son=33129 (15 obs)
  Primary splits:
      MCA.R                   &lt; 3.5  to the right, improve=1.33516500, (1 missing)
      total.cte.courses.taken &lt; 0.5  to the left,  improve=0.09803922, (0 missing)
      MCA.M                   &lt; 2.5  to the right, improve=0.03776224, (1 missing)
      ACTCompositeScore       &lt; 19.5 to the right, improve=0.02222222, (3 missing)
  Surrogate splits:
      total.cte.courses.taken &lt; 0.5  to the right, agree=0.615, adj=0.167, (1 split)
      took.ACT                splits as  RL,       agree=0.577, adj=0.083, (0 split)
      MCA.M                   &lt; 3.5  to the right, agree=0.577, adj=0.083, (0 split)

Node number 16565: 25 observations,    complexity param=0.000690417
  predicted class=No meaningful emp NE  expected loss=0.4  P(node) =0.001809365
    class counts:    10    15
   probabilities: 0.400 0.600 
  left son=33130 (12 obs) right son=33131 (13 obs)
  Primary splits:
      MCA.M                   &lt; 2.5  to the left,  improve=1.5411370, (2 missing)
      took.ACT                splits as  LR,       improve=0.8888889, (0 missing)
      cte.achievement         splits as  LLR,      improve=0.5714286, (0 missing)
      total.cte.courses.taken &lt; 0.5  to the right, improve=0.1250000, (0 missing)
  Surrogate splits:
      took.ACT                splits as  LR,       agree=0.739, adj=0.4, (2 split)
      cte.achievement         splits as  LLR,      agree=0.739, adj=0.4, (0 split)
      MCA.R                   &lt; 2.5  to the left,  agree=0.696, adj=0.3, (0 split)
      total.cte.courses.taken &lt; 0.5  to the right, agree=0.609, adj=0.1, (0 split)

Node number 33122: 20 observations
  predicted class=Meaningful emp NE     expected loss=0.4  P(node) =0.001447492
    class counts:    12     8
   probabilities: 0.600 0.400 

Node number 33123: 12 observations
  predicted class=No meaningful emp NE  expected loss=0.3333333  P(node) =0.0008684953
    class counts:     4     8
   probabilities: 0.333 0.667 

Node number 33128: 12 observations
  predicted class=Meaningful emp NE     expected loss=0.25  P(node) =0.0008684953
    class counts:     9     3
   probabilities: 0.750 0.250 

Node number 33129: 15 observations
  predicted class=No meaningful emp NE  expected loss=0.4  P(node) =0.001085619
    class counts:     6     9
   probabilities: 0.400 0.600 

Node number 33130: 12 observations
  predicted class=Meaningful emp NE     expected loss=0.4166667  P(node) =0.0008684953
    class counts:     7     5
   probabilities: 0.583 0.417 

Node number 33131: 13 observations
  predicted class=No meaningful emp NE  expected loss=0.2307692  P(node) =0.0009408699
    class counts:     3    10
   probabilities: 0.231 0.769 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb75"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Plot tree</span></span>
<span id="cb75-2"><a href="#cb75-2" aria-hidden="true" tabindex="-1"></a><span class="fu">rpart.plot</span>(meaningful.emp.ne.grad.year.<span class="fl">10.</span>model.postprune)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="analysis_local_employment_CART_files/figure-html/postpruning meaningful emp ne grad year 10-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb76"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Examine the complexity plot</span></span>
<span id="cb76-2"><a href="#cb76-2" aria-hidden="true" tabindex="-1"></a><span class="fu">printcp</span>(meaningful.emp.ne.grad.year.<span class="fl">10.</span>model.postprune)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Classification tree:
rpart(formula = grad.year.10 ~ ., data = train, method = "class", 
    cp = 0)

Variables actually used in tree construction:
 [1] ACTCompositeScore         ap.exam                  
 [3] cte.achievement           Dem_Desc                 
 [5] economic.status           Gender                   
 [7] highest.cred.level        MCA.M                    
 [9] MCA.R                     ps.grad.InstitutionSector
[11] ps.grad.location          pseo.participant         
[13] RaceEthnicity             SpecialEdStatus          
[15] total.cte.courses.taken  

Root node error: 2414/13817 = 0.17471

n= 13817 

          CP nsplit rel error xerror     xstd
1 0.00096658      0   1.00000 1.0000 0.018490
2 0.00069042      3   0.99710 1.0033 0.018514
3 0.00066280     27   0.97597 1.0108 0.018568
4 0.00062189     32   0.97266 1.0236 0.018660</code></pre>
</div>
<div class="sourceCode cell-code" id="cb78"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plotcp</span>(meaningful.emp.ne.grad.year.<span class="fl">10.</span>model.postprune)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="analysis_local_employment_CART_files/figure-html/postpruning meaningful emp ne grad year 10-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb79"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Compute the accuracy of the pruned tree</span></span>
<span id="cb79-2"><a href="#cb79-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb79-3"><a href="#cb79-3" aria-hidden="true" tabindex="-1"></a>test<span class="sc">$</span>pred <span class="ot">&lt;-</span> <span class="fu">predict</span>(meaningful.emp.ne.grad.year.<span class="fl">10.</span>model.postprune, test, <span class="at">type =</span> <span class="st">"class"</span>)</span>
<span id="cb79-4"><a href="#cb79-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb79-5"><a href="#cb79-5" aria-hidden="true" tabindex="-1"></a>accuracy_postprun <span class="ot">&lt;-</span> <span class="fu">mean</span>(test<span class="sc">$</span>pred <span class="sc">==</span> test<span class="sc">$</span>grad.year<span class="fl">.10</span>)</span>
<span id="cb79-6"><a href="#cb79-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb79-7"><a href="#cb79-7" aria-hidden="true" tabindex="-1"></a>accuracy_postprun</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.8284363</code></pre>
</div>
</div>
<p><br></p>
<p>We still end up with a highly complex tree that is difficult to interpret. Let’s check to see what variables are considered important.</p>
<ul>
<li>Post-secondary pathway</li>
<li>CTE engagement</li>
<li>High school geography</li>
<li>Post-secondary prep work</li>
<li>A few demographic
<ul>
<li>Gender</li>
<li>SpecialEdStatus</li>
<li>RaceEthnicity</li>
<li>English Learner</li>
</ul></li>
</ul>
<p><br></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb81"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a>meaningful.emp.ne.grad.year.<span class="fl">10.</span>model.postprune<span class="sc">$</span>variable.importance</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>         ps.grad.location ps.grad.InstitutionSector        highest.cred.level 
               67.4330538                42.3796737                39.6387161 
  total.cte.courses.taken                  Dem_Desc           cte.achievement 
               20.5293235                13.4021158                10.4805012 
                    MCA.M         ACTCompositeScore                     MCA.R 
               10.2501253                 9.8198352                 6.9022155 
            RaceEthnicity                    Gender           SpecialEdStatus 
                5.2125507                 5.0548917                 4.4392649 
         pseo.participant                   ap.exam                  took.ACT 
                3.8864469                 2.7466449                 2.0837139 
          economic.status           english.learner                     MCA.S 
                1.6999406                 0.4910115                 0.4193857 </code></pre>
</div>
</div>
<p><br></p>
<p>Now let’s compare the accuracy. The postpruned tree/model looks to be the best.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb83"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a><span class="fu">data.frame</span>(base_accuracy, accuracy_preprun, accuracy_postprun)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  base_accuracy accuracy_preprun accuracy_postprun
1     0.8112124        0.8308004         0.8284363</code></pre>
</div>
</div>
</section>
<section id="summary-2" class="level3">
<h3 class="anchored" data-anchor-id="summary-2">Summary</h3>
<p>Overall, the variables that were the most consistently important throughout the analysis were the following;</p>
<ul>
<li>The post-secondary pathway</li>
<li>CTE engagement</li>
<li>Post-secondary prep work</li>
<li>A few demographics
<ul>
<li>Gender</li>
<li>SpecialEdStatus</li>
<li>RaceEthnicity</li>
</ul></li>
</ul>
<p><br></p>
</section>
</section>
<section id="summary-across-time" class="level2">
<h2 class="anchored" data-anchor-id="summary-across-time">Summary across time</h2>
<ul>
<li>1 year after graduation
<ul>
<li>Took the ACT</li>
<li>CTE coursework</li>
<li>Special education status</li>
<li>MCA - reading score</li>
<li>Average wages as a percent of state average</li>
</ul></li>
<li>5 years after graduation
<ul>
<li>Post-secondary institution</li>
<li>Highest credentials earned</li>
<li>CTE coursework</li>
<li>High school county economics</li>
</ul></li>
<li>10 years after graduation
<ul>
<li>CTE coursework</li>
<li>MCA - reading score</li>
<li>Average wages as a percent of state average</li>
<li>Highest credentials earned</li>
</ul></li>
</ul>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>